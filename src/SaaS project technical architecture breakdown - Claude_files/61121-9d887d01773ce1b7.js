try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e5948cd2-7d56-40e0-8d19-754a6f05ae49",e._sentryDebugIdIdentifier="sentry-dbid-e5948cd2-7d56-40e0-8d19-754a6f05ae49")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61121],{0xeaff4de:(e,t,s)=>{s.d(t,{Hv:()=>C,Rk:()=>N,XI:()=>A,Yo:()=>M,ug:()=>y});var a=s(0x22102fd88),i=s(0xfab48d52),l=s(0x4d48ac5d),n=s(0x1882451af),r=s(0x239c4283),d=s(0xf32c56dd),o=s(0x14de19ae8),u=s(0x139b5e710),c=s(0x1f57763bb),m=s(0x225bae024),x=s(0x183548b63),g=s(0x141440998),f=s(0x78b33fbd),h=s(0x1a1f6dda6),p=s(0xef41e510),b=s.n(p),_=s(0xfc89b4a4),v=s(0x1ab0d1ca1),j=s(0x38e6572),w=s(0xac06e3dc);let M="overages-upgrade-upsell-modal-opened",y=6048e5,k=null;function A(e){null==k||k(!0,e)}function N(){var e;let t=(0,v.A)(),s=(0,d.st)(),c=(0,o.zm)(),{addSuccess:m,addError:x}=(0,u.Y)(),[g,f]=(0,_.useState)(void 0),[h,p]=(0,_.useState)(!1),[b,j]=(0,_.useState)(!1),[w,M]=(0,_.useState)(!1),[y,A]=(0,_.useState)(!1),{data:N}=(0,i.WF)(),{data:C}=(0,i.Wm)(),I=(null==C?void 0:C.isEnabled)||!1,L="number"==typeof(null==C?void 0:C.monthlyLimit)&&(null==C?void 0:C.monthlyLimit)>0,T="number"==typeof(null==N?void 0:N.amount)&&N.amount>0;(0,_.useEffect)(()=>(k=(e,t)=>{p(e),f(t)},()=>{k=null}),[]);let{mutate:E,isPending:Y}=(0,i.pA)({onSuccess:()=>{m(t.formatMessage({defaultMessage:"Extra usage has been turned on",id:"LC2Ix1nDGO"})),s.track({event_key:"claudeai.overages.enabled",spend_limit_type:"organization"}),M(!1),T||A(!0)},onError:e=>{x(e.message||t.formatMessage({defaultMessage:"Failed to turn on extra usage",id:"YHVjXnuk3m"}),{error:e,messageForLogging:"Failed to turn on extra usage"})}}),{mutate:P,isPending:D}=(0,i.HP)({onSuccess:()=>{E({isEnabled:!0})},onError:e=>{x(e.message||t.formatMessage({defaultMessage:"Failed to set up billing infrastructure",id:"wmQ2LJxiyG"}),{error:e,messageForLogging:"Failed to set up billing infrastructure"})}}),O=(0,_.useCallback)(()=>{p(!1),f(void 0)},[]),U=(0,_.useCallback)(()=>{P({seat_tier_monthly_spend_limits:c?{enterprise_standard:null,enterprise_tier_1:null,enterprise_usage_based:null}:{team_standard:null,team_tier_1:null},org_monthly_spend_limit:i.Dy})},[c,P]),W=(0,_.useCallback)(()=>{I?j(!0):L?U():M(!0),O()},[I,L,U,O]),F=(0,_.useCallback)(()=>{M(!1),p(!0)},[]),z=(0,_.useCallback)(e=>{A(!1),e&&O()},[O]),q=(0,_.useCallback)(()=>{j(!1),O()},[O]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{isOpen:h,overagesEnabled:I,messageLimit:g,onOveragesClick:W,onClose:O}),(0,a.jsx)(n.n,{isOpen:w,onClose:F,onConfirm:U,isEnabling:D||Y}),(0,a.jsx)(r.V,{isOpen:y,hasCredits:!1,onClose:z}),(0,a.jsx)(l.l,{isOpen:b,hasAutoReload:!!(null==N||null==(e=N.auto_reload_settings)?void 0:e.enabled),onClose:q})]})}function C(){return(0,f.useExperiment)("claude_ai_overages_upgrade_cta").get("enabled",!1)}function S(e){let{isOpen:t,overagesEnabled:s,messageLimit:i,onOveragesClick:l,onClose:n}=e,r=(0,v.A)(),u=(0,d.st)(),g=(0,o.UC)(),f=(0,o.bu)(),p=(0,o.tP)(),b=g||f||p,y=(0,o.$b)(),{windowName:k,status:A}=(0,w.T)(null==i?void 0:i.windows),N=(0,_.useMemo)(()=>(null==A?void 0:A.resets_at)?new Date(1e3*A.resets_at):null,[null==A?void 0:A.resets_at]),C=(0,_.useMemo)(()=>N?r.formatDate(N,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):null,[r,N]),S=(0,_.useMemo)(()=>b?null:k&&N&&"overage"!==k?"5h"===k?r.formatMessage({defaultMessage:"Wait until {resetHour}",id:"0rNZILlkMs"},{resetHour:r.formatTime(N,{hour:"numeric"})}):r.formatMessage({defaultMessage:"Wait until {resetDayOfWeek}",id:"q0dq8jPlbz"},{resetDayOfWeek:r.formatDate(N,{weekday:"long"})}):r.formatMessage({defaultMessage:"No, thanks",id:"fFaCQIK3h3"}),[r,b,k,N]);(0,_.useEffect)(()=>{t&&(u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.viewed",limit_window:k,paid_account_tier:y,can_upgrade:b}),localStorage.setItem(M,new Date().toISOString()))},[t,u,k,y,b]);let I=(0,_.useCallback)(()=>{u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.overages_clicked",limit_window:k,paid_account_tier:y,can_upgrade:b,overages_enabled:s}),l()},[u,k,y,b,s,l]),E=(0,_.useCallback)(()=>{u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.upgrade_clicked",limit_window:k,paid_account_tier:y,can_upgrade:b,overages_enabled:s})},[u,k,y,b,s]),Y=(0,_.useCallback)(()=>{u.track({event_key:"claudeai.overages_or_upgrades_upsell_modal.closed",limit_window:k,paid_account_tier:y,can_upgrade:b}),n()},[u,k,y,b,n]),P=(0,_.useMemo)(()=>g?"/upgrade/pro":f?"/upgrade?hide_pro=true":p?"/upgrade":null,[g,f,p]);return(0,a.jsxs)(x.aF,{isOpen:t,modalSize:b?"2lg":"sm",backgroundColor:b?"bg-bg-200":"bg-bg-100",overlayClassName:"z-toast",onClose:Y,children:[(0,a.jsx)("div",{className:"absolute top-3 right-4",children:(0,a.jsx)(x.s_,{onClose:Y})}),(0,a.jsx)("h2",{className:"font-title",children:(0,a.jsx)(j.A,{defaultMessage:"Keep using Claude?",id:"cTZJslVw1b"})}),(0,a.jsx)("p",{className:(0,h.A)("mt-2 mb-5 text-sm",{"text-text-500":b}),children:C?(0,a.jsx)(j.A,{defaultMessage:"You've reached your plan's message limit. You can wait until it resets at {resetTime}, or continue now:",id:"GCY/aSohFS",values:{resetTime:C}}):(0,a.jsx)(j.A,{defaultMessage:"You've reached your plan's message limit. You can wait until it resets at the scheduled time, or continue now:",id:"Shyct06Bi/"})}),b?(0,a.jsxs)("div",{className:"flex flex-row items-stretch gap-4",children:[(0,a.jsx)(L,{title:r.formatMessage({defaultMessage:"Pay per message",id:"dtazUCgjED"}),description:r.formatMessage({defaultMessage:"Get extra usage to finish what you're working on.",id:"qRgjP76jll"}),PictogramComponent:c.Nq,onClick:I}),P&&(0,a.jsx)(L,{title:r.formatMessage({defaultMessage:"Upgrade to a higher plan",id:"MqTWZ29Lwe"}),description:r.formatMessage({defaultMessage:"Get higher limits and do more with Claude.",id:"YrmCb0w4py"}),PictogramComponent:c.j6,href:P,onClick:E})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("ul",{className:"mb-8",children:[(0,a.jsx)(T,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Continue without interruption",id:"0WkTDuwIgp"})}),(0,a.jsx)(T,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Pay only for what you use",id:"8FFgJKCSbr"})}),(0,a.jsx)(T,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Control costs with spending caps",id:"NMNGH13oxY"})}),(0,a.jsx)(T,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Track usage in real time",id:"eR6EzdokAj"})}),(0,a.jsx)(T,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Works with Claude.ai and Claude Code",id:"dkoDCo77YZ"})}),(0,a.jsx)(T,{benefitText:(0,a.jsx)(j.A,{defaultMessage:"Auto-reload when balance runs low",id:"C0IHaxOPo4"})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-end gap-2",children:[(0,a.jsx)(m.$,{className:"w-full",onClick:I,children:(0,a.jsx)(j.A,{defaultMessage:"Get extra usage",id:"tYq4Dt6buP"})}),(0,a.jsx)(m.$,{variant:"ghost",className:"w-full underline",onClick:Y,children:S})]})]})]})}let I="flex flex-col flex-1 p-6 justify-between rounded-xl border text-left bg-bg-100 border-border-300 hover:border-border-100 min-h-[300px] shadow-sm";function L(e){let{title:t,description:s,PictogramComponent:i,href:l,onClick:n}=e,r=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-none",children:[(0,a.jsx)("h3",{className:"mb-2 font-semibold",children:t}),(0,a.jsx)("p",{className:"font-base text-text-500",children:s})]}),(0,a.jsx)(i,{size:"small"})]});return l?(0,a.jsx)(b(),{className:I,href:l,onClick:n,children:r}):(0,a.jsx)("button",{className:I,onClick:n,children:r})}function T(e){let{benefitText:t}=e;return(0,a.jsxs)("li",{className:"flex items-start gap-2.5 mb-1 text-text-300",children:[(0,a.jsx)(g.S,{className:"mt-0.5 flex-shrink-0",size:18}),(0,a.jsx)("span",{className:"text-sm",children:t})]})}},0x2b8c35fe:(e,t,s)=>{s.d(t,{F:()=>l});var a=s(0xa5acf583),i=s(0xac309a83);let l=e=>{let{serverGateNames:t}=(0,a._r)(),s=(0,i.fS)(e);return!!t&&s&&t.includes(e)}},0x3769f4df:(e,t,s)=>{s.d(t,{Eu:()=>g,WJ:()=>c,YW:()=>m,be:()=>u,fy:()=>x});var a=s(0x14a6d5f1),i=s(0x14de19ae8),l=s(0xac309a83),n=s(0x22be9474c),r=s(0xbebfc702),d=s(0x1c12b3087);let o=!s(0xc6857cab).env.NEXT_PUBLIC_DISABLE_WEB_SEARCH,u=()=>{let e=(0,l.fS)("claudeai_web_search");return o&&e},c=()=>{var e;let t=(0,i.mV)(),{data:s}=(0,n.rX)(),a=!!s&&!(null==(e=s.disabled_features)?void 0:e.includes("web_search"));return o&&(!t||a)},m=()=>{let e=u(),t=c();return e&&t},x=e=>{var t,s,a;let n=c(),{account:u}=(0,i.YL)(),m=(0,l.fS)("claudeai_web_search_default_on")&&o,x=(0,d.QN)(),{data:g}=(0,r.xQ)(x),f=(0,l.fS)("claude_ai_sticky_project_settings");if(!n)return!1;let h=m?(null==u||null==(t=u.settings)?void 0:t.enabled_web_search)!==!1:!!(null==u||null==(s=u.settings)?void 0:s.enabled_web_search);return e?!!(null==e||null==(a=e.conversationSettings)?void 0:a.enabled_web_search):x&&f?!!(null==g?void 0:g.enabled_web_search):h},g=e=>{let t=(0,a.Wq)()(e,"web_search");return o&&t}},0x8c555bbe:(e,t,s)=>{s.d(t,{D:()=>r,MessageLimitModalProvider:()=>d});var a=s(0x22102fd88),i=s(0xfc89b4a4),l=s(0xd96dfc62);let n=null;function r(){n&&n(!0)}function d(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>(n=t,()=>{n=null}),[]),(0,a.jsx)(l.v,{isOpen:e,onClose:()=>t(!1),limitType:"message_limit"})}},0xac06e3dc:(e,t,s)=>{s.d(t,{T:()=>a});function a(e,t){var s,a,i,l,n,r,d,o;if(!e)return{windowName:null,status:null};let u=null==(o=null==t?void 0:t.startsWith("claude-opus"))||o,c=(null==(s=e["5h"])?void 0:s.status)==="exceeded_limit",m=(null==(a=e["7d"])?void 0:a.status)==="exceeded_limit",x=u&&(null==(i=e["7d_opus"])?void 0:i.status)==="exceeded_limit",g=(null==(l=e.overage)?void 0:l.status)==="exceeded_limit";if((m||c||x)&&g)return{windowName:"overage",status:e.overage};let f=[];if(c&&f.push({name:"5h",resetTime:e["5h"].resets_at}),m&&f.push({name:"7d",resetTime:e["7d"].resets_at}),x&&f.push({name:"7d_opus",resetTime:e["7d_opus"].resets_at}),f.length>1){let t=f.reduce((e,t)=>t.resetTime>e.resetTime?t:e);return{windowName:t.name,status:e[t.name]}}return x?{windowName:"7d_opus",status:e["7d_opus"]}:m?{windowName:"7d",status:e["7d"]}:c||(null==(n=e["5h"])?void 0:n.status)==="approaching_limit"?{windowName:"5h",status:e["5h"]}:(null==(r=e["7d"])?void 0:r.status)==="approaching_limit"?{windowName:"7d",status:e["7d"]}:(null==(d=e.overage)?void 0:d.status)==="approaching_limit"?{windowName:"overage",status:e.overage}:{windowName:null,status:null}}},0xb22529cb:(e,t,s)=>{s.d(t,{A6:()=>d,Wi:()=>o});var a=s(0x156c4e43b),i=s(0xac309a83),l=s(0x17f3a2521);let n=[],r=[];function d(){let e=o(),t=(0,i.T9)("frontend_fallback_paprika_config","modes",r,u);return e.length>0?e:t}function o(){return(0,i.T9)("paprika_config","modes",n,u)}let u=a.YO(a.Ik({id:a.Yj(),title:a.Yj(),description:a.Yj(),description_key:a.Yj().optional(),paprika_mode_value:l.T4.optional()}))},0xdf883ab6:(e,t,s)=>{s.d(t,{J:()=>n,j:()=>l});var a=s(0x14a6d5f1),i=s(0xb22529cb);let l=()=>{let{allModelOptions:e}=(0,a.A9)();return t=>{var s;let a=e.find(e=>e.model===t);return!!(null==a||null==(s=a.paprika_modes)?void 0:s.includes("extended"))}},n=()=>!!(0,i.A6)().length},0xfce0e9a4:(e,t,s)=>{s.d(t,{z:()=>n});var a=s(0xfc89b4a4),i=s(0x1417f52d9),l=s(0x22869d32a);function n(e,t){let{dateAdded:s,priority:n,showAfterOthersDismiss:r}=t,d=(0,a.useContext)(l.L),{dismiss:o,isDismissed:u}=(0,i.W)();if(!d)throw Error("useNux must be used within a NuxProvider");let{registerNux:c,unregisterNux:m,currentlyShowing:x}=d;return(0,a.useEffect)(()=>{if(!u(e))return c(e,{dateAdded:s,priority:n,showAfterOthersDismiss:r}),()=>m(e)},[e,s,n,r,u,c,m]),{shouldShow:x===e&&!u(e),dismiss:()=>{o(e),m(e),localStorage.removeItem(e)}}}},0x1025e2485:(e,t,s)=>{s.d(t,{q:()=>d});var a=s(0x22102fd88),i=s(0xa6a34c14),l=s(0x1a1f6dda6),n=s(0xfc89b4a4),r=s(0x1c12b3087);let d=e=>{let{children:t,actionButton:s,title:d,minimalUi:o,dangerText:u}=e,{hasBlockingWarning:c,setHasBlockingWarning:m}=(0,r.Tc)(e=>({hasBlockingWarning:e.hasBlockingWarning,setHasBlockingWarning:e.setHasBlockingWarning}),"BlockingWarning");return(0,n.useEffect)(()=>(m(!0),()=>{m(!1)}),[c,m]),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,a.jsxs)("div",{className:(0,l.A)("flex flex-row items-center gap-2 md:w-full",u?"text-danger-000":o?"text-text-300":"text-danger-000"),children:[o?null:(0,a.jsx)(i.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,a.jsxs)("div",{children:[d&&(0,a.jsx)("div",{className:"text-sm font-medium",children:d}),(0,a.jsx)("div",{className:"text-sm",children:t})]})]}),!!s&&(0,a.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:s})]})})}},0x109513363:(e,t,s)=>{s.d(t,{IK:()=>A,hq:()=>E,AC:()=>k});var a=s(0x22102fd88),i=s(0x226530adf),l=s(0x10e9ea2cc),n=s(0x14de19ae8),r=s(0x225bae024),d=s(0x800328fa),o=s(0x20e00cddd),u=s(0xac309a83),c=s(0x1ab362a20),m=s(0x78b33fbd),x=s(0xc6536c20),g=s(0xfc89b4a4),f=s(0x38e6572),h=s(0x4d48ac5d),p=s(0xe0745a8f),b=s(0x8c555bbe),_=s(0x19273021e),v=s(0x12c402068),j=s(0x1025e2485),w=s(0xac06e3dc),M=s(0x242212ea2);function y(){let e=(0,m.useExperiment)("claude_ai_rate_limit_modal").get("show_upgrade_modal",!1);return(0,g.useEffect)(()=>{e&&(0,b.D)()},[e]),null}let k=()=>{let{messageLimit:e,account:t,activeOrganization:s}=(0,n.YL)(),i=(0,n.mV)(),l=(0,n.O9)(),r=(0,n.zc)(),[d,o]=(0,g.useState)(!0),[u,c]=(0,g.useState)(!0),m=(0,g.useMemo)(()=>{if(!t||!s)return!1;let e=t.memberships.find(e=>e.organization.uuid===s.uuid);return(null==e?void 0:e.seat_tier)==="enterprise_usage_based"||(null==e?void 0:e.seat_tier)==="enterprise_usage_based_chat"},[t,s]),x=function(e){var t,s,a;if(!e||"within_limit"===e.type)return{isOverageScenario:!1,isBlocking:!1,isActive:!1};let i=!!e.overageDisabledReason&&"overage_not_provisioned"!==e.overageDisabledReason&&"org_level_disabled"!==e.overageDisabledReason,l=!!(null==(t=e.windows)?void 0:t.overage)||i,n=(null==(a=e.windows)||null==(s=a.overage)?void 0:s.status)==="exceeded_limit"||i;return{isOverageScenario:l,isBlocking:n,isActive:!n&&l}}(e);return x.isOverageScenario?x.isBlocking?{messageLimit:e,overageExceededWarning:(0,a.jsx)(S,{messageLimit:e,isBlocking:!0})}:m?{messageLimit:e}:{messageLimit:e,approachingMessageLimitWarning:u?(0,a.jsx)(S,{messageLimit:e,isBlocking:!1,onDismiss:()=>c(!1)}):void 0}:(null==e?void 0:e.type)==="exceeded_limit"||(null==e?void 0:e.type)==="approaching_limit"&&0===e.remaining?{messageLimit:e,exceededMessageLimitWarning:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N,{messageLimit:e,isUsageBasedSeatTier:m}),!l&&!i&&!r&&(0,a.jsx)(y,{})]})}:(null==e?void 0:e.type)==="approaching_limit"&&(null==e?void 0:e.representativeClaim)!=="five_hour"?{messageLimit:e,approachingMessageLimitWarning:d?(0,a.jsx)(C,{messageLimit:e,onDismiss:()=>o(!1)}):void 0}:{}},A=e=>{let t=k(),{messageLimit:s}=t,a=(null==s?void 0:s.type)==="within_limit",l=(0,i.Z3)(e),n=a?null:null==s?void 0:s.conversationUuid,r=(0,i.Z3)(null!=n?n:null);return(null==s?void 0:s.type)!=="within_limit"&&(null==s?void 0:s.perModelLimit)&&l!==r?{}:t};function N(e){let{messageLimit:t,isUsageBasedSeatTier:s=!1}=e,i=(0,n.mV)(),l=(0,n.O9)(),r=(0,n.zc)(),u=(0,n.tP)(),c=(0,p.o)(),m=(0,n.Kq)(),{limitActionButton:g}=(0,M.h)({messageLimit:t}),{hasOAuthTokens:h}=function(){var e;let{data:t,isLoading:s}=(0,_.Jh)();return{hasOAuthTokens:null!=(e=null==t?void 0:t.some(e=>!e.is_revoked))&&e,isLoading:s}}(),{windowName:b,status:v}=(0,w.T)(t.windows),y=(null==v?void 0:v.resets_at)||t.resetsAt;if(!y)return null;let k=x.c9.fromSeconds(y),A=i&&c&&!m,N=(()=>{if(s)if(A)return(0,a.jsx)(f.A,{defaultMessage:"Extra usage is required - contact an admin to keep working",id:"Bidiq5CnYF"});else return(0,a.jsx)(f.A,{defaultMessage:"Extra usage is required",id:"fejJ1o01QI"});if("5h"===b)if(A)return(0,a.jsx)(f.A,{defaultMessage:"Session limit resets {time} - contact an admin to keep working",id:"f+LljSJaDw",values:{time:k.toLocaleString(x.c9.TIME_SIMPLE)}});else return(0,a.jsx)(f.A,{defaultMessage:"Session limit reached ∙ resets {time}",id:"m3w/HLXJdF",values:{time:k.toLocaleString(x.c9.TIME_SIMPLE)}});if("7d"===b){let e=k.toFormat("cccc");return A?(0,a.jsx)(f.A,{defaultMessage:"Weekly limit resets {day} {time} - contact an admin to keep working",id:"LUFY3UYYXY",values:{day:e,time:k.toLocaleString(x.c9.TIME_SIMPLE)}}):(0,a.jsx)(f.A,{defaultMessage:"Weekly limit reached ∙ resets {day} {time}",id:"MhyGCtndd7",values:{day:e,time:k.toLocaleString(x.c9.TIME_SIMPLE)}})}if("7d_opus"===b){let e=k.toFormat("cccc");return A?(0,a.jsx)(f.A,{defaultMessage:"Opus limit resets {day} {time} - contact an admin to keep working",id:"ir+wpgGBaT",values:{day:e,time:k.toLocaleString(x.c9.TIME_SIMPLE)}}):(0,a.jsx)(f.A,{defaultMessage:"Opus limit reached ∙ resets {day} {time}",id:"9Di9WqoUCM",values:{day:e,time:k.toLocaleString(x.c9.TIME_SIMPLE)}})}return null})();return(0,a.jsxs)(j.q,{actionButton:A?null:g,minimalUi:!0,children:[N||(r&&u?(0,a.jsx)(f.A,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,a.jsx)("span",{className:"inline-block",children:k.toLocaleString(x.c9.TIME_SIMPLE)})}}):l||i||r?h?(0,a.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. <link>Your limits are shared with Claude Code</link>",id:"UrobydPO9o",values:{time:(0,a.jsx)("span",{className:"inline-block",children:k.toLocaleString(x.c9.TIME_SIMPLE)}),link:e=>(0,a.jsx)(d.Y,{href:"/settings/claude-code",children:e})}}):(0,a.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,a.jsx)("span",{className:"inline-block",children:k.toLocaleString(x.c9.TIME_SIMPLE)})}}):(0,a.jsx)(f.A,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,a.jsx)("span",{className:"inline-block",children:k.toLocaleString(x.c9.TIME_SIMPLE)}),link:e=>(0,a.jsx)(d.Y,{target:"_blank",rel:"noreferrer",href:o.Kf,children:e})}})),(0,a.jsx)(T,{messageLimit:t})]})}let C=e=>{let{messageLimit:t,onDismiss:s}=e,{limitActionButton:i}=(0,M.h)(),{windowName:l,status:n}=(0,w.T)(t.windows),d=(null==n?void 0:n.resets_at)||t.resetsAt;if(!d)return null;let o=x.c9.fromSeconds(d);return(0,a.jsxs)(v.x,{children:[(0,a.jsx)("span",{className:"text-text-300 text-sm",children:"5h"===l?(0,a.jsx)(f.A,{defaultMessage:"Approaching session limit",id:"eufK6+n0Ub"}):"7d"===l?(0,a.jsx)(f.A,{defaultMessage:"Approaching weekly limit",id:"t2T1PWD6TI"}):(0,a.jsx)(f.A,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,a.jsx)("span",{className:"inline-block",children:o.toLocaleString(x.c9.TIME_SIMPLE)})}})}),(0,a.jsxs)("span",{children:[i,(0,a.jsx)(r.$,{className:"ml-2 !bg-transparent",size:"icon_xs",variant:"ghost",onClick:s,children:(0,a.jsx)(c.X,{size:12})})]})]})},S=e=>{let{messageLimit:t,onDismiss:s,isBlocking:i}=e;return i?(0,a.jsx)(I,{messageLimit:t}):(0,a.jsx)(L,{messageLimit:t,onDismiss:s})},I=e=>{let{messageLimit:t}=e,s=(0,n.mV)(),i=(0,p.o)(),[l,r]=(0,g.useState)(!1);if(s&&i)return(0,a.jsx)(j.q,{actionButton:null,minimalUi:!0,dangerText:!0,children:(0,a.jsx)(f.A,{defaultMessage:"Limit reached - contact an admin to keep working",id:"f1/9b+4969"})});if((null==t?void 0:t.overageDisabledReason)==="out_of_credits"){let e=(0,a.jsx)("button",{onClick:()=>r(!0),className:"underline text-sm",children:(0,a.jsx)(f.A,{defaultMessage:"Add funds",id:"sx0aSlxLIy"})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.q,{actionButton:e,minimalUi:!0,dangerText:!0,children:(0,a.jsx)(f.A,{defaultMessage:"Wallet empty",id:"hgChvDBkGs"})}),(0,a.jsx)(h.l,{isOpen:l,onClose:()=>r(!1)})]})}let o=(0,a.jsx)(d.Y,{href:"/settings/usage",className:"text-sm",children:(0,a.jsx)(f.A,{defaultMessage:"Manage",id:"0AzlrbMWV9"})});return(0,a.jsx)(j.q,{actionButton:o,minimalUi:!0,dangerText:!0,children:(0,a.jsx)(f.A,{defaultMessage:"Spending cap reached",id:"e2HH8SvqXl"})})},L=e=>{let{messageLimit:t,onDismiss:s}=e,{windowName:i,status:l}=(0,w.T)(t.windows),n=(null==l?void 0:l.resets_at)||t.resetsAt;if(!n)return null;let d=x.c9.fromSeconds(n);return(0,a.jsxs)(v.x,{children:[(0,a.jsx)("span",{className:"text-text-300 text-sm",children:(()=>{if("5h"===i)return(0,a.jsx)(f.A,{defaultMessage:"Session limit resets {time} ∙ continuing with extra usage",id:"SYg4MwoW+k",values:{time:d.toLocaleString(x.c9.TIME_SIMPLE)}});if("7d"===i){let e=d.toFormat("cccc");return(0,a.jsx)(f.A,{defaultMessage:"Weekly limit resets {day} {time} ∙ continuing with extra usage",id:"wvFU29jyYg",values:{day:e,time:d.toLocaleString(x.c9.TIME_SIMPLE)}})}if("7d_opus"===i){let e=d.toFormat("cccc");return(0,a.jsx)(f.A,{defaultMessage:"Opus limit resets {day} {time} ∙ continuing with extra usage",id:"P3sN2kt3TW",values:{day:e,time:d.toLocaleString(x.c9.TIME_SIMPLE)}})}return(0,a.jsx)(f.A,{defaultMessage:"Limit reached ∙ continuing with extra usage",id:"uWI9rRK6Dw"})})()}),(0,a.jsx)("span",{children:s&&(0,a.jsx)(r.$,{className:"ml-2 !bg-transparent",size:"icon_xs",variant:"ghost",onClick:s,children:(0,a.jsx)(c.X,{size:12})})})]})},T=e=>{let{messageLimit:t}=e,{mutate:s}=(0,l.T)(t.conversationUuid);return(0,u.fS)("can_reset_rate_limits")?(0,a.jsx)(r.$,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>s(),children:(0,a.jsx)(f.A,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},E=e=>{var t;let{messageLimit:s,activeOrganization:a}=(0,n.YL)(),r=(0,l.$)(),d=(0,i.Z3)(e),o=(null==s?void 0:s.type)!=="within_limit"&&null!=(t=null==s?void 0:s.conversationUuid)?t:null,u=(0,i.Z3)(o);(0,g.useEffect)(()=>{(null==a?void 0:a.uuid)&&s&&"within_limit"!==s.type&&u!==d&&r({type:"within_limit"},a.uuid,e)},[e,u,a,s,d,r])}},0x12c402068:(e,t,s)=>{s.d(t,{x:()=>i});var a=s(0x22102fd88);function i(e){return(0,a.jsx)("div",{...e,className:"font-normal text-[0.65rem] sm:text-xs w-full flex gap-1.5 items-center justify-between"})}},0x1ddc8fd3d:(e,t,s)=>{s.d(t,{B:()=>V});var a=s(0x22102fd88),i=s(0x226530adf),l=s(0x14a6d5f1),n=s(0xdd4f13c7),r=s(0x14de19ae8),d=s(0x252daebb2),o=s(0xfc89b4a4),u=s(0x38e6572);function c(){return(0,o.useMemo)(()=>({"rainbow-garden-echo":(0,a.jsx)(d.YX,{id:"rainbow_garden_echo"}),"crystal-meadow-sunrise":(0,a.jsx)(d.YX,{id:"crystal_meadow_sunrise"})}),[])}var m=s(0x10f221f41),x=s(0x225bae024),g=s(0x12bb05cb6),f=s(0x1b370f49d),h=s(0xb844abc8),p=s(0x23977865),b=s(0xac309a83),_=s(0x1bd175d8c),v=s(0x10a2d47e3),j=s(0x141440998),w=s(0x10b8a0309),M=s(0x1a1f6dda6),y=s(0x1dc411c0f),k=s(0x160045b25),A=s(0x1ab0d1ca1),N=s(0x24b92fff4),C=s(0xdf883ab6),S=s(0x31c535e9),I=s(0x1f4f9b2db),L=s(0x21fb79560);let T=e=>{var t;let{model:s}=e,i=c()[null!=(t=s.name_i18n_key)?t:""],l=s.name.replace("Claude",""),n=l.startsWith("\uD83E\uDD2B")?(0,a.jsx)(f.m,{tooltipContent:l,children:(0,a.jsx)("span",{children:"\uD83E\uDD2B"})}):l;return(0,a.jsx)("div",{className:"font-claude-response inline-flex gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:(0,a.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,a.jsx)("div",{className:"whitespace-nowrap select-none",children:i||n})})})};var E=s(0xf32c56dd),Y=s(0x17185943),P=s(0x16a573a92),D=s(0xfce0e9a4);let O=e=>{let{anchorRef:t,canShowTooltip:s,onDismiss:i,onCtaClick:l,nuxId:n,nuxItem:r,badgeText:d,title:o,ctaLabel:u,modelId:c}=e,{track:g}=(0,E.st)(),{shouldShow:f,dismiss:h}=(0,D.z)(n,r),p=()=>{g({event_key:"claudeai.model_upsell.tooltip.dismissed",...c&&{model_id:c}}),h(),i()};return s&&f?(g({event_key:"claudeai.model_upsell.tooltip.viewed",...c&&{model_id:c}}),(0,a.jsx)(P.U,{anchorRef:t,side:"bottom",align:"center",onClose:p,introDelay:.2,accentColor:"secondary",buttonText:u,onClickButton:()=>{g({event_key:"claudeai.model_upsell.tooltip.clicked",...c&&{model_id:c}}),l()},buttonAlignment:"end",className:"!max-w-[14.5rem]",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:(0,M.A)("flex items-center mb-3",d?"justify-between":"justify-end"),children:[d&&(0,a.jsx)(Y.E,{color:"flat",className:"!bg-accent-secondary-200 !text-always-white",size:"default",children:d}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon_xs",onClick:p,className:"!text-accent-secondary-000 hover:!text-accent-secondary-100 hover:!bg-transparent",children:(0,a.jsx)(m.X,{size:12})})]}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("p",{className:"font-base text-accent-secondary-000",children:o})})]})})):null},U=(0,o.lazy)(()=>s.e(15912).then(s.bind(s,0x12d9a90e8)).then(e=>({default:e.NewFeatureNuxPopover})));function W(e){return(0,a.jsx)("div",{...e,className:"uppercase mt-0.3 bg-accent-pro-100/10 text-accent-pro-000 rounded-full px-2 ml-2 -mr-1 border-0.5 border-accent-pro-100/10 leading-4 h-4 text-[0.6rem] flex-shrink-0"})}function F(e){return(0,a.jsx)("div",{...e,className:"border-0.5 border-border-300 -mr-1 ml-2 translate-y-px rounded-full px-2 py-px text-xs text-text-500 group-hover:bg-bg-100"})}let z=(0,a.jsx)(u.A,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),q=(0,a.jsx)(u.A,{defaultMessage:"Upgrade to Claude Pro to use our legacy models",id:"2VGJTJrr3b"}),B={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},X=(e,t,s,a,i)=>!!s&&!t&&e!==a&&!i.includes(e),G=e=>{var t,s,i,n,m;let{model:x,currentModelOption:h,defaultModel:p,opensInNewChat:b,onSelect:_,tag:v,tooltip:w,onUpgradeClick:y,isRestrictedBySeatTier:k,showDescription:A=!0}=e,N=c(),C=(0,o.useMemo)(()=>({"haiku-3-5-description":(0,a.jsx)(u.A,{defaultMessage:"Fastest for quick answers",id:"V6uMo5CPHU",description:"A description of the AI model"}),"haiku-current-gen-description":(0,a.jsx)(u.A,{defaultMessage:"Fastest for quick answers",id:"V6uMo5CPHU",description:"A description of the AI model"}),"sonnet-3-7-description":(0,a.jsx)(u.A,{defaultMessage:"Our most intelligent model yet",id:"WW0Apyq96E",description:"A description of the AI model"}),"telescope-cinnamon-lampshade":(0,a.jsx)(u.A,{defaultMessage:"Deep brainstorming model. Consumes usage faster.",id:"0mxhIMLBFN",description:"A description of the AI model"}),"origami-glacier-marmalade":(0,a.jsx)(u.A,{defaultMessage:"Smartest for everyday tasks",id:"2d50lKJw6F",description:"A description of the AI model"}),"midnight-sapphire-cascade":(0,a.jsx)(d.YX,{id:"midnight_sapphire_cascade"}),"rainbow-butterfly-stream":(0,a.jsx)(d.YX,{id:"rainbow_butterfly_stream"}),"crystal-mountain-breeze":(0,a.jsx)(d.YX,{id:"crystal_mountain_breeze"})}),[]),S=(0,r.h0)(),I=(0,l.qv)(),T=x.model===(null==h?void 0:h.model),E=x.name.replace("Claude","").trim(),Y=X(x.model,T,!S,p,I)?"Upgrade":v,P=k&&!T;return(0,a.jsx)(f.m,{tooltipContent:w,side:"right",children:(0,a.jsx)("div",{children:(0,a.jsxs)(g.tJ,{onClick:()=>{(!k||T)&&(T||Y?("Upgrade"===Y||"PRO"===Y)&&(null==y||y()):_(x))},className:(0,M.A)("group pr-1",("Upgrade"===Y||"PRO"===Y)&&"cursor-pointer",k&&!T&&"opacity-40 cursor-not-allowed"),disabled:P,children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-sm",children:(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsx)("div",{className:"font-ui-serif",children:null!=(s=N[null!=(t=x.name_i18n_key)?t:""])?s:E})})}),Y&&!T&&"Upgrade"===Y?(0,a.jsx)(L.M,{as:"button",className:"mt-0.3 ml-2 -mr-1 flex-shrink-0",onClick:e=>{e.stopPropagation(),null==y||y()}}):Y&&!T?(0,a.jsx)(W,{children:Y}):null,!T&&b&&!Y&&(0,a.jsx)(F,{children:(0,a.jsx)(u.A,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),A&&(C[null!=(i=x.description_i18n_key)?i:""]||x.description)&&(0,a.jsx)("div",{className:"text-text-500 pr-4 text-xs mt-1",children:null!=(m=C[null!=(n=x.description_i18n_key)?n:""])?m:x.description})]}),T&&(0,a.jsx)(j.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})})},H=e=>{let{models:t,currentModelOption:s,defaultModel:i,opensInNewChat:n,handleModelSelect:c,hasMultiModalContent:m,showDescription:x=!0}=e,g=(0,A.A)(),f=(0,o.useMemo)(()=>({"velvet-bicycle-thunderstorm":(0,a.jsx)(d.YX,{id:"velvet_bicycle_thunderstorm"})}),[]),h=(0,r.h0)(),p=(0,r.Ox)(),b=(0,l.qv)(),_=!h,v=()=>{window.location.href="/upgrade"};return(0,a.jsx)(a.Fragment,{children:t.map(e=>{let t=p(e.model);return(0,a.jsx)(G,{model:e,currentModelOption:s,defaultModel:i,opensInNewChat:n,onSelect:c,hasMultiModalContent:m,tag:(()=>{if(X(e.model,e.model===(null==s?void 0:s.model),_,i,b))return g.formatMessage({defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})(),tooltip:(e=>{var t,l;if(p(e.model)&&e.model!==(null==s?void 0:s.model))return(0,a.jsx)(u.A,{defaultMessage:"This model is not available for your current plan",id:"FhHD7lBh9l"});if(X(e.model,e.model===(null==s?void 0:s.model),_,i,b))if(e.overflow)return q;else return z;return null!=(l=f[null!=(t=e.notice_text_i18n_key)?t:""])?l:e.notice_text})(e),onUpgradeClick:v,isRestrictedBySeatTier:t,showDescription:x},e.model)})})},V=e=>{let{selectedModel:t,conversationUuid:s,onSelect:c,placement:f,hasMultiModalContent:j,open:A,onOpenChange:L,isNewConversation:E,disabled:Y=!1,modelsConfig:P}=e,D=!E,{allModelOptions:W,mainModels:F,overflowModels:z}=P,q=(0,i.Z3)(s||null),G=null!=t?t:q,V=(0,o.useRef)(null),K=(0,S.vP)("paprika_mode"),R=(0,C.j)(),J=(0,N.G8)(),{toggleConversationSetting:Z}=(0,S.rX)({source:"modelSelector"}),$=(0,v.wc)(),Q=(0,r.Ox)(),ee=W.find(e=>e.model===G);ee||(ee=B);let et=(0,b.fS)("model_selector_enabled"),es=(0,r.h0)(),{setStickyModelPreference:ea}=(0,n.F)(),[ei,el]=(0,o.useState)(!1),en=(0,b.fS)("starlight_whisper_meadow_nux"),er=(0,b.fS)("blue_velvet_sofa"),ed=(0,l.qv)(),eo=(0,_.V)(p.E_),eu=e=>{Q(e.model)||(et||!X(e.model,!1,!es,q,ed))&&(K&&!R(e.model)&&Z("paprika_mode",null),J(e.model)||Z("compass_mode",null),ea(e.model),c(e))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g.ms,{className:(0,M.A)("relative"),..."bottom"===f?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),collisionPadding:{top:52*!!eo},open:!Y&&A,onOpenChange:e=>{!Y&&(L&&L(e),e||el(!1))},trigger:(0,a.jsx)(y.P.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,a.jsx)(x.$,{ref:V,variant:"ghost",size:"sm","data-testid":"model-selector-dropdown",append:(0,a.jsx)(m.biH,{className:"opacity-75"}),className:(0,M.A)(A&&"!bg-bg-200 !text-text-100 hover:!bg-bg-200"),disabled:Y,children:(0,a.jsx)(T,{model:ee})})}),children:[(0,a.jsx)(H,{models:F,currentModelOption:ee,defaultModel:q,opensInNewChat:D,handleModelSelect:eu,hasMultiModalContent:j}),z.length>0&&((0,h.Fr)()?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.DG,{}),(0,a.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,a.jsx)(u.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,a.jsx)(H,{models:z,currentModelOption:ee,defaultModel:q,opensInNewChat:D,handleModelSelect:eu,hasMultiModalContent:j,showDescription:!1})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.DG,{}),(0,a.jsxs)(g.MS,{children:[(0,a.jsxs)(g.Wn,{className:"pl-2 py-1.5 gap-2 min-h-8",children:[(0,a.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,a.jsx)(u.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,a.jsx)(w.K,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,a.jsx)(g.cm,{children:(0,a.jsx)(g.FV,{sideOffset:0,children:(0,a.jsx)(H,{models:z,currentModelOption:ee,defaultModel:q,opensInNewChat:D,handleModelSelect:eu,hasMultiModalContent:j,showDescription:!1})})})]})]}))]}),(0,a.jsx)(k.N,{children:(0,a.jsx)(O,{anchorRef:V,canShowTooltip:en,onDismiss:()=>void 0,onCtaClick:()=>{let e=$[v.hH];if(e){let t=W.find(t=>t.model===e);t&&eu(t)}},nuxId:"starlight-tooltip-nux",nuxItem:{dateAdded:"2025-10-10",priority:I.c.HIGH,showAfterOthersDismiss:!1},badgeText:(0,a.jsx)(d.YX,{id:"silver_mountain_echo"}),title:(0,a.jsx)(d.YX,{id:"crimson_butterfly_garden"}),ctaLabel:(0,a.jsx)(d.YX,{id:"amber_forest_whisper"}),modelId:$[v.hH]})}),er&&(null==ee?void 0:ee.name)&&(0,a.jsx)(o.Suspense,{fallback:null,children:(0,a.jsx)(U,{anchorRef:V,canShowNux:!!localStorage.getItem("crimson_lighthouse_marble_nux"),text:(0,a.jsx)(d.YX,{id:"crimson_lighthouse_marble",dangerouslyVisiblePublicValues:{value:ee.name.replace("Claude","").trim()}}),id:"crimson_lighthouse_marble_nux",nuxItem:{dateAdded:"2025-11-21",priority:I.c.MEDIUM,showAfterOthersDismiss:!0},side:"bottom"})})]})}},0x1f4f9b2db:(e,t,s)=>{s.d(t,{c:()=>a});var a=function(e){return e[e.HIGH=30]="HIGH",e[e.MEDIUM=20]="MEDIUM",e[e.LOW=10]="LOW",e[e.NONE=0]="NONE",e}({})},0x20567b754:(e,t,s)=>{s.d(t,{L:()=>r});var a=s(0x22102fd88),i=s(0x1a1f6dda6),l=s(0x160045b25),n=s(0x1dc411c0f);function r(e){let{warning:t,placement:s,theme:r,onClick:d}=e,o=(0,i.A)("w-full border-0.5 relative z-[5] px-3.5","bottom"===s?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-transparent":"danger"===r,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===r,"bg-bg-300 border-transparent":"info"===r,"bg-bg-200 border-transparent":"chin"===r,"hover:bg-bg-300 transition-colors":"chin"===r&&!!d});return(0,a.jsx)(l.N,{children:t&&(0,a.jsx)(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:d?(0,a.jsx)("button",{className:(0,i.A)(o),onClick:d,children:t}):(0,a.jsx)("div",{className:o,children:t})})})}},0x22869d32a:(e,t,s)=>{s.d(t,{L:()=>l,NuxProvider:()=>n});var a=s(0x22102fd88),i=s(0xfc89b4a4);let l=(0,i.createContext)(null);function n(e){let{children:t}=e,[s,n]=(0,i.useState)({items:{},currentlyShowing:null}),[d,o]=(0,i.useState)(!1),u=(0,i.useCallback)((e,t)=>{n(s=>{if(s.items[e])return s;let a={...s.items,[e]:t};return{items:a,currentlyShowing:r(a,!0)}})},[]),c=(0,i.useCallback)(e=>{n(t=>{let{[e]:s,...a}=t.items;return{items:a,currentlyShowing:t.currentlyShowing===e?r(a):t.currentlyShowing}})},[]),m=(0,i.useCallback)(e=>{o(e),e||n(e=>({...e,currentlyShowing:r(e.items)}))},[]),x=(0,i.useMemo)(()=>({items:s.items,currentlyShowing:d?null:s.currentlyShowing,registerNux:u,unregisterNux:c,setSpotlightActive:m}),[s.items,s.currentlyShowing,d,u,c,m]);return(0,a.jsx)(l.Provider,{value:x,children:t})}let r=(e,t)=>{let s=Object.entries(e).sort((e,t)=>{let s=e[1].priority||0,a=t[1].priority||0;return s!==a?a-s:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var a,i;return null!=(i=null==(a=s[0])?void 0:a[0])?i:null}for(let[e,t]of s)if(t.showAfterOthersDismiss)return e;return null}},0x242212ea2:(e,t,s)=>{s.d(t,{h:()=>c});var a=s(0x22102fd88),i=s(0xa5acf583),l=s(0x14de19ae8),n=s(0x800328fa),r=s(0xfc89b4a4),d=s(0x38e6572),o=s(0xe0745a8f),u=s(0xeaff4de);function c(){let{allowSelfUpgrade:e=!0,messageLimit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=function(e){let t=(0,l.UC)(),s=(0,l.wi)(),a=(0,l.bu)(),n=(0,l.tP)(),r=(0,l.Kq)(),d=(0,i.fZ)(),c=(0,l.mV)(),x=(0,o.o)(),g=(0,u.Hv)();return d?(t||a||n)&&e?t?s||a||n?"subscribe":"subscribe-pro-only":a?m({isOveragesUpgradeCtaExperimentActive:g,isOveragesProvisioningAvailable:x,canManageBilling:r,isRaven:c})?"overages-or-upgrade":"subscribe-max":n?m({isOveragesUpgradeCtaExperimentActive:g,isOveragesProvisioningAvailable:x,canManageBilling:r,isRaven:c})?"overages-or-upgrade":"subscribe-max-20x":"none":x?c?"enable-overages":"overages-or-upgrade":"none":"contact-sales"}(e),n=null;switch(s){case"contact-sales":n=(0,a.jsx)(x,{});break;case"subscribe":n=(0,a.jsx)(g,{});break;case"subscribe-pro-only":n=(0,a.jsx)(f,{});break;case"subscribe-max":n=(0,a.jsx)(h,{});break;case"subscribe-max-20x":n=(0,a.jsx)(p,{});break;case"enable-overages":n=(0,a.jsx)(b,{});break;case"overages-or-upgrade":n=(0,a.jsx)(_,{messageLimit:t});break;case"none":n=null}return{limitActionButtonType:s,limitActionButton:n}}function m(e){let{isOveragesUpgradeCtaExperimentActive:t,isOveragesProvisioningAvailable:s,canManageBilling:a,isRaven:i}=e;return t&&s&&a&&!i}function x(){let{websiteBaseUrl:e}=(0,i._r)();return(0,a.jsx)(n.Y,{href:"".concat(e,"/contact-sales"),className:"text-sm",children:(0,a.jsx)(d.A,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function g(){return(0,a.jsx)(n.Y,{href:"/upgrade?hide_free=true",className:"text-sm",children:(0,a.jsx)(d.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function f(){return(0,a.jsx)(n.Y,{href:"/upgrade/pro",className:"text-sm",children:(0,a.jsx)(d.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function h(){return(0,a.jsx)(n.Y,{href:"/upgrade?hide_pro=true",className:"text-sm",children:(0,a.jsx)(d.A,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function p(){return(0,a.jsx)(n.Y,{href:"/upgrade",className:"text-sm",children:(0,a.jsx)(d.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function b(){let e=(0,l.mV)(),t=(0,l.Kq)();return(0,a.jsx)(n.Y,{href:e&&t?"/admin-settings/usage":"/settings/usage",className:"text-sm",children:(0,a.jsx)(d.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}function _(e){let{messageLimit:t}=e,s=r.useRef(!1);(0,r.useEffect)(()=>{if(!s.current){let e=localStorage.getItem(u.Yo);if(e){let t=new Date(e).getTime();if(new Date().getTime()-t<u.ug)return}null===u.XI||void 0===u.XI||(0,u.XI)(t),s.current=!0}},[]);let i=(0,r.useCallback)(()=>{null===u.XI||void 0===u.XI||(0,u.XI)(t)},[t]);return(0,a.jsx)(n.Y,{className:"text-sm",onClick:i,children:(0,a.jsx)(d.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}},0x24b92fff4:(e,t,s)=>{s.d(t,{BU:()=>_,G8:()=>b,Gm:()=>v,Ow:()=>p,g7:()=>h,hs:()=>j});var a=s(0x14a6d5f1),i=s(0x12c9046cd),l=s(0x14de19ae8),n=s(0xac309a83),r=s(0x1b813d90);s(0x1d302b010);var d=s(0xbebfc702),o=s(0x1c12b3087),u=s(0xe824fb1c),c=s(0x1334f6ecc),m=s(0x31c535e9),x=s(0x18175ce17),g=s(0x3769f4df),f=s(0xc6857cab);let h=()=>{let e=p(),t=(0,o.QN)(),{data:s}=(0,d.fo)(t);return(null==s?void 0:s.type)!==d.gM.Haystack&&e&&!f.env.NEXT_PUBLIC_DISABLE_COMPASS},p=()=>{let e=(0,n.fS)("use_incoherent_traffic_light_noises"),t=_();return e&&t},b=()=>{let e=(0,a.Wq)();return t=>e(t,"compass")},_=()=>{let e=(0,g.YW)(),t=(0,c.K6)(),s=(0,x.Ys)(r.v8.GMAIL),a=(0,x.Ys)(r.v8.GCAL),i=(0,u.Uz)({type:"remote"}).length>0;return e||t||s||a||i},v=e=>{var t;let s=(0,g.fy)(e),a=(0,c.$f)(e),{isAuthenticated:i}=(0,c.kJ)(),l=(0,x.X0)(r.v8.GMAIL,e),{isAuthenticated:n}=(0,x.ob)(r.v8.GMAIL),d=(0,x.X0)(r.v8.GCAL,e),{isAuthenticated:o}=(0,x.ob)(r.v8.GCAL),f=null!=(t=(0,m.vP)("enabled_mcp_tools"))?t:{},h=(0,u.Uz)({type:"remote",isConnected:!0}).some(e=>{var t;return null==(t=e.tools)?void 0:t.some(e=>!1!==f[e.enabledKey])});return s||a&&i||l&&n||d&&o||h},j=(e,t)=>{let{activeOrganization:s}=(0,l.YL)(),a=null==s?void 0:s.uuid;return(0,i.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"/task/").concat(t,"/stop"),"POST",{enabled:!!(a&&e&&t)})}}}]);