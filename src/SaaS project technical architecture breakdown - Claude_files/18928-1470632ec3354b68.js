try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9109db9b-3f5f-4b4d-9c44-b91c08296e1b",e._sentryDebugIdIdentifier="sentry-dbid-9109db9b-3f5f-4b4d-9c44-b91c08296e1b")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18928],{0x1db5af03:(e,t,o)=>{o.d(t,{O:()=>r});let r=(0,o(0x394ef833).v)(e=>({serversNeedingWebsocketRetry:[],addServerNeedingWebsocketRetry:t=>e(e=>({serversNeedingWebsocketRetry:[...e.serversNeedingWebsocketRetry,t]})),clearServersNeedingWebsocketRetry:()=>e({serversNeedingWebsocketRetry:[]})}))},0xeac745ba:(e,t,o)=>{function r(e,t,o,r,a){var n,s,i,c;if(!o||!r)return;let l=null==(n=o.success)||n,u=null==(s=r.success)||s;if(l!==u)return void a({event_key:"mcp.shadow.comparison",server_uuid:e,capability:t,match:!1,websocket_count:o.count,bootstrap_count:r.count,websocket_duration_ms:o.duration_ms,bootstrap_duration_ms:r.duration_ms});if(!l&&!u)return;let d=null!=(i=o.count)?i:0,p=null!=(c=r.count)?c:0;(0!==d||0!==p)&&a({event_key:"mcp.shadow.comparison",server_uuid:e,capability:t,match:d===p,websocket_count:o.count,bootstrap_count:r.count,websocket_duration_ms:o.duration_ms,bootstrap_duration_ms:r.duration_ms})}function a(e,t,o,r){var a,n;(null==(a=o.success)||a)&&0!==(null!=(n=o.count)?n:0)&&r({event_key:"mcp.shadow.comparison",server_uuid:e,capability:t,match:!1,websocket_count:o.count,bootstrap_count:0,websocket_duration_ms:o.duration_ms})}o.d(t,{Z:()=>n});let n=(0,o(0x394ef833).v)((e,t)=>({toolsData:new Map,promptsData:new Map,resourcesData:new Map,trackFn:null,bootstrapFinished:!1,websocketStartTime:0,setTrackFn:(t,o)=>e({trackFn:t,websocketStartTime:o}),setBootstrapFinished:()=>{e({bootstrapFinished:!0});let o=t();if(o.trackFn){for(let[e,t]of o.toolsData.entries())t.websocket&&!t.bootstrap&&a(e,"tools",t.websocket,o.trackFn);for(let[e,t]of o.promptsData.entries())t.websocket&&!t.bootstrap&&a(e,"prompts",t.websocket,o.trackFn);for(let[e,t]of o.resourcesData.entries())t.websocket&&!t.bootstrap&&a(e,"resources",t.websocket,o.trackFn)}},recordWebsocketTools:(e,o)=>{let n=t(),s=n.toolsData.get(e)||{};!s.websocket&&(s.websocket=o,n.toolsData.set(e,s),n.trackFn&&(s.bootstrap?r(e,"tools",o,s.bootstrap,n.trackFn):n.bootstrapFinished&&a(e,"tools",o,n.trackFn)))},recordWebsocketPrompts:(e,o)=>{let n=t(),s=n.promptsData.get(e)||{};!s.websocket&&(s.websocket=o,n.promptsData.set(e,s),n.trackFn&&(s.bootstrap?r(e,"prompts",o,s.bootstrap,n.trackFn):n.bootstrapFinished&&a(e,"prompts",o,n.trackFn)))},recordWebsocketResources:(e,o)=>{let n=t(),s=n.resourcesData.get(e)||{};!s.websocket&&(s.websocket=o,n.resourcesData.set(e,s),n.trackFn&&(s.bootstrap?r(e,"resources",o,s.bootstrap,n.trackFn):n.bootstrapFinished&&a(e,"resources",o,n.trackFn)))},recordBootstrapTools:(e,o)=>{let a=t(),n=a.toolsData.get(e)||{};!n.bootstrap&&(n.bootstrap=o,a.toolsData.set(e,n),n.websocket&&a.trackFn&&r(e,"tools",n.websocket,o,a.trackFn))},recordBootstrapPrompts:(e,o)=>{let a=t(),n=a.promptsData.get(e)||{};!n.bootstrap&&(n.bootstrap=o,a.promptsData.set(e,n),n.websocket&&a.trackFn&&r(e,"prompts",n.websocket,o,a.trackFn))},recordBootstrapResources:(e,o)=>{let a=t(),n=a.resourcesData.get(e)||{};!n.bootstrap&&(n.bootstrap=o,a.resourcesData.set(e,n),n.websocket&&a.trackFn&&r(e,"resources",n.websocket,o,a.trackFn))}}))},0x14c0dfde7:(e,t,o)=>{o.d(t,{u3:()=>g,oQ:()=>b,p9:()=>v});var r=o(0x14de19ae8),a=o(0x18e5c6e75),n=o(0xac309a83),s=o(0x253a5c787),i=o(0x1ea21c42d),c=o.n(i),l=o(0xfc89b4a4);function u(e){var t,o,r,a,n,s,i,c;return{name:e.name,description:null!=(t=e.description)?t:void 0,annotations:e.annotations?{title:null!=(o=e.annotations.title)?o:void 0,readOnlyHint:null!=(r=e.annotations.readOnlyHint)?r:void 0,destructiveHint:null!=(a=e.annotations.destructiveHint)?a:void 0,idempotentHint:null!=(n=e.annotations.idempotentHint)?n:void 0,openWorldHint:null!=(s=e.annotations.openWorldHint)?s:void 0}:void 0,inputSchema:{...e.inputSchema,properties:null!=(i=e.inputSchema.properties)?i:void 0,required:null!=(c=e.inputSchema.required)?c:void 0},displayName:e.displayName,enabledKey:e.enabled_key,alwaysApprovedKey:e.always_approved_key}}function d(e){var t,o,r,a;return{name:e.name,description:null!=(o=e.description)?o:void 0,title:null!=(r=e.title)?r:void 0,arguments:null==(t=e.arguments)?void 0:t.map(e=>{var t,o;return{name:e.name,description:null!=(t=e.description)?t:void 0,required:null!=(o=e.required)?o:void 0}}),_meta:null!=(a=e._meta)?a:void 0,displayName:e.displayName}}function p(e){var t,o,r,a,n,s;return{uri:e.uri,name:e.name,description:null!=(t=e.description)?t:void 0,title:null!=(o=e.title)?o:void 0,mimeType:null!=(r=e.mimeType)?r:void 0,size:null!=(a=e.size)?a:void 0,annotations:null!=(n=e.annotations)?n:void 0,_meta:null!=(s=e._meta)?s:void 0,displayName:e.displayName}}var m=o(0xe824fb1c),_=o(0x1db5af03),y=o(0xeac745ba);function g(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];o||(m.eZ.getState().setRemoteIsLoading(!0),_.O.getState().clearServersNeedingWebsocketRetry());let n=Date.now(),i=[],l=()=>{if(0!==i.length){for(let e of i){let s=m.eZ.getState(),i=Date.now()-n;if("server_base"!==e.type||o){if("tools"===e.type){let r=e.tools||[],n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(u)}(t?(0,a.M)(r):r);o?y.Z.getState().recordBootstrapTools(e.uuid,{count:n.length,duration_ms:i}):s.setRemoteTools(e.uuid,n)}else if("resources"===e.type){let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(p)}(e.resources);o?y.Z.getState().recordBootstrapResources(e.uuid,{count:t.length,duration_ms:i}):s.setRemoteResources(e.uuid,t)}else if("prompts"===e.type){let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(d)}(e.prompts);o?y.Z.getState().recordBootstrapPrompts(e.uuid,{count:t.length,duration_ms:i}):s.setRemotePrompts(e.uuid,t)}}else{let t={uuid:e.uuid,name:e.name,url:e.url,custom_oauth_client_id:e.custom_oauth_client_id,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:e.usedAuthentication};e.connected&&(0,m.nd)(e.uuid)&&(0,m.s$)(e.uuid)&&((0,m.rD)(t),(0,m.I3)(t.uuid,t.url,r)),e.connected?(0,m.n3)(e.uuid,e.usedAuthentication):(_.O.getState().addServerNeedingWebsocketRetry(t),s.removeRemoteServer(e.uuid))}}i.length=0}},g=c()(l,300,{leading:!0,trailing:!0}),v=new EventSource("/api/organizations/".concat(e,"/mcp/v2/bootstrap"),{withCredentials:!0});return v.onerror=()=>{g.cancel(),l(),v.close(),o||(m.eZ.getState().setRemoteIsLoading(!1),_.O.getState().clearServersNeedingWebsocketRetry()),(0,s.Cp)(Error("MCP bootstrap stream error"),{tags:{action:"mcp_bootstrap_stream_error",only_shadow:o},extra:{orgUuid:e}})},v.addEventListener("server_list",t=>{try{let{servers:e}=JSON.parse(t.data);if(!o){for(let t of(m.eZ.getState().setRemoteIsLoading(!1),e))if((0,m.nd)(t.uuid)){let e={uuid:t.uuid,name:t.name,url:t.url,custom_oauth_client_id:null,custom_oauth_client_secret:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_authenticated:!1};(0,m.rD)(e),(0,m.I3)(e.uuid,e.url,r)}}}catch(o){(0,s.Cp)(o,{tags:{action:"mcp_bootstrap_stream_server_list_parse"},extra:{orgUuid:e,eventData:t.data}})}}),v.addEventListener("server_base",t=>{try{let e=JSON.parse(t.data);i.push({type:"server_base",...e}),g()}catch(o){(0,s.Cp)(o,{tags:{action:"mcp_bootstrap_stream_server_base_parse"},extra:{orgUuid:e,eventData:t.data}})}}),v.addEventListener("tools",t=>{try{let{server_uuid:e,tools:o}=JSON.parse(t.data);i.push({type:"tools",uuid:e,tools:o}),g()}catch(o){(0,s.Cp)(o,{tags:{action:"mcp_bootstrap_stream_tools_parse"},extra:{orgUuid:e,eventData:t.data}})}}),v.addEventListener("resources",t=>{try{let{server_uuid:e,resources:o}=JSON.parse(t.data);i.push({type:"resources",uuid:e,resources:o}),g()}catch(o){(0,s.Cp)(o,{tags:{action:"mcp_bootstrap_stream_resources_parse"},extra:{orgUuid:e,eventData:t.data}})}}),v.addEventListener("prompts",t=>{try{let{server_uuid:e,prompts:o}=JSON.parse(t.data);i.push({type:"prompts",uuid:e,prompts:o}),g()}catch(o){(0,s.Cp)(o,{tags:{action:"mcp_bootstrap_stream_prompts_parse"},extra:{orgUuid:e,eventData:t.data}})}}),v.addEventListener("completed",()=>{g.cancel(),l(),v.close(),o||m.eZ.getState().setRemoteIsLoading(!1),o&&y.Z.getState().setBootstrapFinished()}),()=>{g.cancel(),v.close()}}let v=()=>(0,n.fS)("mcp_tb_sessions");function b(e){let{activeOrganization:t}=(0,r.YL)(),o=null==t?void 0:t.uuid,a=(0,n.fS)("claude_ai_unicode_sanitize_mcp_data"),s=v(),i=(0,n.fS)("mcp_shadow_comparison");(0,l.useEffect)(()=>{if(o){if(i)return g(o,a,!0,e);else if(s)return g(o,a,!1,e)}},[s,o,a,i,e])}},0x1d302b010:(e,t,o)=>{o.d(t,{vW:()=>N,R4:()=>A,qb:()=>C,ll:()=>R,XT:()=>O,eB:()=>D,W3:()=>T,NW:()=>j,lu:()=>S,p4:()=>E});var r=o(0xf32c56dd),a=o(0x12c9046cd),n=o(0x14de19ae8),s=o(0x139b5e710),i=o(0x49fac030),c=o(0xac309a83),l=o(0x1b813d90),u=o(0x17e725145),d=o(0xfc89b4a4),p=o(0x156c4e43b),m=o(0x14c0dfde7),_=o(0x9cb4c2a2),y=o(0x1c12b3087),g=o(0x597e433e),v=o(0xe824fb1c);function b(e){let t=window.atob(e),o=new ArrayBuffer(t.length),r=new Uint8Array(o);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return o}var f=o(0x1e48e639d),h=o(0x242b93f35);let k=h.Ay.object({uuid:h.Ay.string().uuid(),name:h.Ay.string(),url:h.Ay.string(),created_at:h.Ay.string().datetime(),updated_at:h.Ay.string().datetime(),custom_oauth_client_id:h.Ay.string().nullable().optional(),custom_oauth_client_secret:h.Ay.string().nullable().optional(),is_authenticated:h.Ay.boolean().default(!1)});var w=o(0x21edecce6),x=o(0x1e841cc7d),Y=o(0x18175ce17);let S=()=>(0,c.fS)("papi_mcp"),j=()=>(0,c.fS)("claude_ai_mcp_directory_web_only"),I=p.k5(["safe_for_phi"]),F=p.Ik({type:I,content_hash:p.Yj()});function D(e,t){let o=S(),r=(0,m.p9)();return(0,a.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[i.lA,e],enabled:!r&&o&&!!e,...t,select:e=>p.YO(k).parse(e)})}function O(e,t,o){return(0,a.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),{queryKey:[i.Sm,e,t],enabled:!!e&&!!t,...o,select:e=>k.parse(e)})}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,{track:n}=(0,r.st)(),s=(0,u.useQueryClient)(),l=(0,m.p9)(),d=(0,c.fS)("claude_ai_unicode_sanitize_mcp_data"),p=(0,w.p)();return(0,a.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(r,a,c)=>{var u;l&&((0,v.rD)(r),"directory"===o.source&&(0,v.I3)(r.uuid,r.url,p),(0,m.u3)(e,d)),s.invalidateQueries({queryKey:[i.lA,e]}),s.invalidateQueries({queryKey:[i.qE,e]}),null==(u=t.onSuccess)||u.call(t,r,a,c),n({event_key:"claudeai.mcp.create_server",source:o.source,url:r.url,type:"remote"})}})}function R(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,u.useQueryClient)(),n=(0,m.p9)(),s=(0,c.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,a.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...o,onSuccess:(a,c,l)=>{var u;(0,v.eg)(t),n?(0,m.u3)(e,s):(r.setQueryData([i.lA,e],e=>{var o;return null!=(o=null==e?void 0:e.filter(e=>e.uuid!==t))?o:[]}),r.invalidateQueries({queryKey:[i.lA,e]})),r.invalidateQueries({queryKey:[i.qE,e]}),null==(u=o.onSuccess)||u.call(o,a,c,l)}})}function T(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,u.useQueryClient)(),n=(0,m.p9)(),s=(0,c.fS)("claude_ai_unicode_sanitize_mcp_data");return(0,a.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...o,onSettled:()=>{(0,v.Ug)(t)},onSuccess:(t,a,c)=>{var l;n?(0,m.u3)(e,s):r.invalidateQueries({queryKey:[i.lA,e]}),r.invalidateQueries({queryKey:[i.qE,e]}),null==(l=o.onSuccess)||l.call(o,t,a,c)}})}function E(e){let t=(0,m.p9)(),{activeOrganization:o}=(0,n.YL)(),r=null==o?void 0:o.uuid;return(0,a.L2)("/api/organizations/".concat(r,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!r&&t})}function A(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:o}=(0,n.YL)(),r=null==o?void 0:o.uuid;return(0,a.L2)("/api/organizations/".concat(r,"/mcp/attach_resource"),"POST",{enabled:t&&!!r,...e})}(),t=L(),o=function(){let{setIsUploadingDriveSync:e}=(0,_.oM)(),{setSyncSourceUuids:t}=(0,y.Jy)(e=>({setSyncSourceUuids:e.setSyncSourceUuids})),o=(0,Y.kO)(),r=(0,Y.qi)(l.v8.GDRIVE),{addError:a}=(0,s.Y)(),{mutate:n}=(0,x.EF)({onMutate:()=>{e(!0)},onSuccess:o=>{t(e=>[...e,o.uuid]),e(!1)},onError:t=>{e(!1),a((0,f.J)(t),{error:t})},meta:{noToast:!0}});return(0,d.useCallback)(e=>{o&&r&&n({sync_source_type:l.v8.MCP_RESOURCES,sync_source_config:{server_uuid:r.uuid,resource:{...e}}})},[n,o,r])}(),{addError:i}=(0,s.Y)(),c=(0,m.p9)(),u=function(){let{addError:e}=(0,s.Y)(),{track:t}=(0,r.st)(),{handleUpload:o}=(0,_.oM)();return(0,d.useCallback)(async(r,a)=>{try{let e=(await (0,v.KU)(r).readResource({uri:a.uri},{timeout:15e3})).contents.map(e=>{let o;return"text"in e?(o=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(o=b(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([o],a.name,{type:e.mimeType})});e.length>0&&await o(e)}catch(t){e("Failed to upload resource. You can try again.",{error:t})}},[t,e,o])}(),{setIsUploadingDriveSync:p}=(0,_.oM)();return(0,d.useCallback)(async r=>{let{serverUuid:a,resource:n,onClose:s}=r;if(!c||(0,v.HG)(a,c))return u(a,n);{let r;try{let e=(0,v.KU)(a);r=await e.readResource({uri:n.uri},{timeout:15e3})}catch(e){}try{var l;p(!0);let i=await e({resource:n,server_uuid:a,result:r});(null==(l=n.mimeType)?void 0:l.startsWith("application/vnd.google-apps"))?o(n):t(i),p(!1),null==s||s()}catch(e){p(!1),i("Failed to attach resource. You can try again.",{error:e,errorContext:{tags:{action:"attach_resource"},extra:{serverUuid:a}}})}}},[c,u,p,e,o,t,i])}function N(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,m.p9)(),{activeOrganization:o}=(0,n.YL)(),r=null==o?void 0:o.uuid;return(0,a.L2)("/api/organizations/".concat(r,"/mcp/attach_prompt"),"POST",{enabled:t&&!!r,...e})}(),o=L(),{addError:i}=(0,s.Y)(),c=(0,m.p9)(),l=function(e){let{track:t}=(0,r.st)(),{addError:o}=(0,s.Y)(),{handleUpload:a}=(0,_.oM)();return(0,d.useCallback)(async(r,n,s)=>{try{let o=await (0,v.KU)(r).getPrompt({name:n.name,arguments:s},{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(s).length,assistant_messages:o.messages.filter(e=>"assistant"===e.role).length,user_messages:o.messages.filter(e=>"user"===e.role).length,text_messages:o.messages.filter(e=>"text"===e.content.type).length,image_messages:o.messages.filter(e=>"image"===e.content.type).length});let i=(e,t)=>{let o=e=>{let t=g._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},r=e=>"".concat(n.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],r("txt"),{type:"text/plain"});case"image":{let t=o(e.content.mimeType);return new File([b(e.content.data)],r(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var a;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(a=t.mimeType)?a:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let r=o(t.mimeType);return new File([b(t.blob)],"".concat(t.uri,".").concat(r),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===o.messages.length)await a([i(o.messages[0],0)]);else if(o.messages.length>1){let e=o.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[i(e,t)]:[]),t=o.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let o=JSON.stringify(t,null,2);e.push(new File([o],"".concat(n.name,"_messages.json"),{type:"application/json"}))}await a(e)}null==e||e()}catch(e){o("Failed to get prompt. You can try again.",{error:e})}},[t,o,a,e])}(e);return(0,d.useCallback)(async r=>{let{serverUuid:a,prompt:n,args:s}=r;if(!c||(0,v.HG)(a,c))return l(a,n,s);{let r;try{let e=(0,v.KU)(a);r=await e.getPrompt({name:n.name,arguments:s},{timeout:15e3})}catch(e){}try{let i=await t({prompt:n,arguments:s,server_uuid:a,result:r});o(i),null==e||e()}catch(e){i("Failed to attach prompt. You can try again.",{error:e,errorContext:{tags:{action:"attach_prompt"},extra:{serverUuid:a}}})}}},[t,o,i,e,c,l])}function L(){let{setAttachments:e,setFiles:t}=(0,y.Jy)(e=>({setAttachments:e.setAttachments,setFiles:e.setFiles}));return(0,d.useCallback)(o=>{let{files:r,attachments:a}=o;r&&r.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...r.filter(e=>!t.has(e.file_uuid))]}),a&&a.length>0&&e(e=>Array.from(new Set([...e,...a].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}p.Ik({name:p.Yj(),url:p.Yj(),custom_oauth_client_id:p.Yj().nullable().optional(),custom_oauth_client_secret:p.Yj().nullable().optional(),attestations:p.YO(F).nullable().optional()}),p.Ik({name:p.Yj().optional().nullable(),url:p.Yj().optional().nullable()})},0x1e48e639d:(e,t,o)=>{o.d(t,{J:()=>a});var r=o(0x1016c6ed2);function a(e){let t="Unable to add Google Doc.";return e instanceof r.LG&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},0x21edecce6:(e,t,o)=>{o.d(t,{p:()=>k});var r=o(0x139b5e710),a=o(0xac309a83),n=o(0x20892a038),s=o(0xfc89b4a4),i=o(0x1b813d90),c=o(0xfe0d571e),l=o(0x156c4e43b);let u=c.$L.f,d=l.Ik({field:l.k5(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:l.Yj()}),p=l.Ik({uuid:l.Yj(),name:l.Yj(),oneLiner:l.Yj(),description:l.Yj(),iconUrl:l.Yj().optional(),toolNames:l.YO(l.Yj()),promptNames:l.YO(l.Yj()),license:l.Yj().optional(),version:l.Yj().optional(),author:l.Ik({name:l.Yj().optional(),url:l.Yj().optional()}).optional(),documentation:l.Yj().optional(),support:l.Yj().optional(),privacyPolicy:l.Yj().optional(),requiredFields:l.YO(d).optional()});p.and(l.Ik({type:l.k5(["firstParty"]),syncSourceType:l.k5([i.v8.GDRIVE,i.v8.GMAIL,i.v8.GCAL,i.v8.SLACK])}));let m=p.and(l.Ik({type:l.k5(["remote"]),isAuthless:l.zM()}).and(l.KC([l.Ik({url:l.Yj(),urlRegex:l.Vx()}),l.Ik({url:l.Vx(),urlRegex:l.Yj()})])));p.and(l.Ik({type:l.k5(["local"]),manifest:u,onDiskPath:l.Yj().optional(),downloadCount:l.ai().optional(),lifetimeDownloadCount:l.ai().optional(),isBlocklisted:l.zM().optional(),isInternal:l.zM().optional(),isAllowlisted:l.zM().optional()}));let _=l.YO(m);var y=o(0xd126dc1a);let g=l.Ik({uuid:l.Yj(),type:l.k5(["remote","local"]),oneLiner:l.Yj(),iconUrl:l.Yj(),documentation:l.Yj(),support:l.Yj(),privacyPolicy:l.Yj(),author:l.Ik({name:l.Yj(),url:l.Yj()}),worksWith:l.YO(l.k5(["claude","claude-api","claude-code","claude-desktop"])),toolNames:l.YO(l.Yj()).optional(),promptNames:l.YO(l.Yj()).optional(),isAuthless:l.zM().optional(),urlRegex:l.Yj().optional(),requiredFields:l.YO(l.Ik({field:l.k5(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:l.Yj()})).optional(),useCases:l.YO(l.Yj()).optional(),permissions:l.Yj().optional(),claudeCodeCopyText:l.Yj().optional(),claudeCodeExternalLink:l.Yj().optional(),slug:l.Yj().optional(),logo:l.Yj().optional(),backgroundPattern:l.Yj().optional(),heroVideoId:l.Yj().optional(),heroVideoPreviewLink:l.Yj().optional(),htmlContent:l.Yj().optional(),itemId:l.Yj().optional(),collectionId:l.Yj().optional(),localeId:l.Yj().optional()}),v=l.Ik({server:l.Ik({name:l.Yj(),version:l.Yj(),title:l.Yj(),description:l.Yj().optional(),remotes:l.YO(l.Ik({type:l.Yj(),url:l.Yj()})).optional(),repository:l.Ik({url:l.Yj().optional(),source:l.Yj().optional()}).optional()}),_meta:l.Ik({"com.anthropic.api/mcp-registry":g})}),b=l.Ik({servers:l.YO(v),metadata:l.Ik({count:l.ai(),nextCursor:l.Yj().optional()})});function f(e){var t,o,r;let a=e._meta["com.anthropic.api/mcp-registry"],n=null==(o=e.server.remotes)||null==(t=o.find(e=>"streamable-http"===e.type||"sse"===e.type))?void 0:t.url;if(!n&&!a.urlRegex)return null;let s={uuid:a.uuid,name:e.server.title,oneLiner:a.oneLiner,description:e.server.description||"",iconUrl:a.iconUrl,toolNames:a.toolNames||[],promptNames:a.promptNames||[],version:e.server.version,author:a.author,documentation:a.documentation,support:a.support,privacyPolicy:a.privacyPolicy,requiredFields:a.requiredFields,type:"remote",isAuthless:null==(r=a.isAuthless)||r};return a.urlRegex?{...s,url:void 0,urlRegex:a.urlRegex}:{...s,url:n,urlRegex:void 0}}async function h(){let e,t=[];do{let o=new URL("https://api.anthropic.com/mcp-registry/v0/servers");o.searchParams.set("version","latest"),o.searchParams.set("limit","100"),e&&o.searchParams.set("cursor",e);let r=await fetch(o.toString());if(!r.ok)throw Error("HTTP ".concat(r.status));let a=await r.json(),n=b.safeParse(a);if(!n.success)throw Error("Invalid response format");let s=n.data.servers.map(f).filter(e=>null!==e);t.push(...s),e=n.data.metadata.nextCursor}while(e);return t}let k=()=>{let e=(0,a.fS)("use_unified_mcp_directory_claude_ai"),{addError:t}=(0,r.Y)(),o=(0,s.useRef)(!1),{data:i,error:c}=(0,n.useQuery)({queryKey:["unified-mcp-directory"],queryFn:h,staleTime:18e5,gcTime:18e5,enabled:e});(0,s.useEffect)(()=>{c&&!o.current&&(o.current=!0,t("Could not load connectors directory.",{error:c,errorContext:{tags:{source:"unified_mcp_directory_fetch"}}}))},[c,t]);let l=(0,a.T9)("mcp_directory_servers","servers",[],_),u=(0,a.T9)("conditional_mcp_directory_servers","servers",[],_),d=l.concat(u);return(0,y.f)(e?null!=i?i:[]:d)}}}]);