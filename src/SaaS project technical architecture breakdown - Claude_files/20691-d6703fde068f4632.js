try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bf7ad1d0-faff-45e5-ae9b-5d0ccbee400b",e._sentryDebugIdIdentifier="sentry-dbid-bf7ad1d0-faff-45e5-ae9b-5d0ccbee400b")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20691],{0x5d793911:(e,t,a)=>{a.d(t,{O:()=>l,U:()=>i});var n=a(0xfc89b4a4),s=a(0x1950735db);let l=()=>{let e=(0,n.useContext)(s.O);if(!e)throw Error("useExtensions must be used within ExtensionsProvider");return e},i=()=>{let{extensions:e,setExtensionSettings:t}=l();return async a=>{let n=e.find(e=>e.id===a);if(!n)return;let s=n.settings||{};await t(a,{...s,isEnabled:!s.isEnabled})}}},0x102661e8c:(e,t,a)=>{a.d(t,{X:()=>c});var n=a(0x22102fd88),s=a(0x139b5e710),l=a(0x225bae024),i=a(0x2252bfeb8),d=a(0xfc89b4a4),r=a(0x1ab0d1ca1),o=a(0x38e6572);let c=e=>{let{extension:t,size:a="normal",style:c}=e,u=(0,r.A)(),{addError:f}=(0,s.Y)(),[x,v]=(0,d.useState)(null),[m,p]=(0,d.useState)(!0),[g,b]=(0,d.useState)(!1);(0,d.useEffect)(()=>{(async()=>{if(!t.id)return p(!1);try{var e;let a=await (null===i.Fd||void 0===i.Fd||null==(e=i.Fd.getIsUpdateAvailable)?void 0:e.call(i.Fd,t.id,t.manifest))||null;v(a)}catch(e){f((0,n.jsx)(o.A,{defaultMessage:"Failed to check for extension updates",id:"qmTCOIrDRY",description:"Error message when checking for extension updates fails"}),{error:e})}finally{p(!1)}})()},[t,f]);let y=async()=>{if(t.id&&x){b(!0);try{var e;await (null===i.Fd||void 0===i.Fd||null==(e=i.Fd.installDxtFromDirectory)?void 0:e.call(i.Fd,t.id,x))}catch(e){f((0,n.jsx)(o.A,{defaultMessage:"Failed to update extension",id:"II6Ozv49Lo",description:"Error message when extension update fails"}),{error:e})}finally{b(!1)}}};if(m||!x)return null;let h=u.formatMessage({defaultMessage:"Update available to v{version}. You are currently on v{currentVersion}.",id:"2Fd2dxtEBo",description:"Title for extension update button"},{version:x,currentVersion:t.manifest.version});return(0,n.jsx)(l.$,{variant:"primary",disabled:g,onClick:y,title:h,style:c,children:g?u.formatMessage({defaultMessage:"Updating...",id:"yugrR4jIsZ",description:"Button text while updating extension"}):"small"===a?u.formatMessage({defaultMessage:"Update",id:"rQoNAJyEVw",description:"Button to update extension (short version)"}):u.formatMessage({defaultMessage:"Update to {version}",id:"Wur112HVmK",description:"Button to update extension to specific version"},{version:x})})}},0x1417f52d9:(e,t,a)=>{a.d(t,{W:()=>i});var n=a(0x17aa9d8d7),s=a(0x14de19ae8),l=a(0xfc89b4a4);function i(){let{mutate:e,isPending:t}=(0,n.yJ)(),{account:a}=(0,s.YL)();return{dismiss:(0,l.useCallback)(t=>{var n,s,l;a&&(null!=a&&null!=(s=a.settings)&&null!=(n=s.dismissed_claudeai_banners)&&n.some(e=>e.banner_id===t)||e({dismissed_claudeai_banners:[...(null==a||null==(l=a.settings)?void 0:l.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]}))},[a,e]),isDismissed:(0,l.useCallback)(e=>{var t,n;let s=(null==a||null==(n=a.settings)||null==(t=n.dismissed_claudeai_banners)?void 0:t.some(t=>t.banner_id===e))||!1;return s&&localStorage.removeItem(e),s},[a]),isPending:t}}},0x1950735db:(e,t,a)=>{a.d(t,{O:()=>i,y:()=>d});var n=a(0x22102fd88),s=a(0x2252bfeb8),l=a(0xfc89b4a4);let i=(0,l.createContext)(void 0),d=e=>{let{children:t}=e,[a,d]=(0,l.useState)([]),[r,o]=(0,l.useState)(!0),[c,u]=(0,l.useState)(!1),[f,x]=(0,l.useState)(null),[v,m]=(0,l.useState)(!0),[p,g]=(0,l.useState)(!0),b=(0,l.useCallback)(async()=>{try{var e;o(!0),x(null);let t=await (null===s.Fd||void 0===s.Fd||null==(e=s.Fd.getInstalledExtensionsWithState)?void 0:e.call(s.Fd));t&&d(t),u(!0)}catch(e){x(e instanceof Error?e.message:"Failed to load extensions")}finally{o(!1)}},[]),y=(0,l.useCallback)(async(e,t)=>{try{var a;await (null===s.Fd||void 0===s.Fd||null==(a=s.Fd.setExtensionSettings)?void 0:a.call(s.Fd,e,t)),d(a=>a.map(a=>a.id===e?{...a,settings:{...a.settings,...t}}:a))}catch(e){x(e instanceof Error?e.message:"Failed to update extension settings"),await b()}},[b]),h=(0,l.useCallback)(async e=>{try{var t;await (null===s.Fd||void 0===s.Fd||null==(t=s.Fd.deleteExtension)?void 0:t.call(s.Fd,e)),d(t=>t.filter(t=>t.id!==e))}catch(e){x(e instanceof Error?e.message:"Failed to delete extension"),await b()}},[b]);(0,l.useEffect)(()=>{var e,t,a,n;b(),null===s.Fd||void 0===s.Fd||null==(e=s.Fd.isDirectoryEnabled)||e.call(s.Fd).then(m),null===s.Fd||void 0===s.Fd||null==(t=s.Fd.isExtensionsEnabled)||t.call(s.Fd).then(g);let l=null===s.Fd||void 0===s.Fd||null==(a=s.Fd.onExtensionsChanged)?void 0:a.call(s.Fd,()=>{b()}),i=null===s.Fd||void 0===s.Fd||null==(n=s.Fd.onExtensionSettingsChanged)?void 0:n.call(s.Fd,(e,t)=>{d(a=>a.map(a=>a.id===e?{...a,settings:{...a.settings,...t}}:a))});return()=>{null==l||l(),null==i||i()}},[b]);let j=(0,l.useCallback)(e=>a.find(t=>t.id===e),[a]),w=(0,l.useMemo)(()=>({extensions:a,isLoading:r,hasLoadedOnce:c,error:f,isDirectoryEnabled:v,isExtensionsEnabled:p,setExtensionSettings:y,deleteExtension:h,getExtensionById:j}),[h,f,a,j,v,p,r,y,c]);return(0,n.jsx)(i.Provider,{value:w,children:t})}},0x1eb0949d5:(e,t,a)=>{a.d(t,{S:()=>v});var n=a(0x22102fd88),s=a(0x139b5e710),l=a(0x2471dc42f),i=a(0x225bae024),d=a(0x2252bfeb8),r=a(0x12a3a86b6),o=a(0x1ab362a20),c=a(0x88148a10),u=a(0xfc89b4a4),f=a(0x1ab0d1ca1),x=a(0x38e6572);let v=e=>{let{manifest:t,settings:a,onSave:v,onCancel:m,className:p}=e,g=(0,f.A)(),{addError:b}=(0,s.Y)(),[y,h]=(0,u.useState)({}),[j,w]=(0,u.useState)(!1),[_,F]=(0,u.useState)(!1),[M,N]=(0,u.useState)(!1);if((0,u.useEffect)(()=>{if(a.userConfig)h(a.userConfig);else if(t.user_config){let e={};for(let[a,n]of Object.entries(t.user_config))void 0!==n.default&&(e[a]=n.default);h(e)}},[t.user_config,a.userConfig]),!t.user_config)return null;let C=(e,t)=>{h(a=>({...a,[e]:t})),w(!0)},k=async()=>{F(!0);try{await v(y),w(!1),N(!0),setTimeout(()=>{N(!1)},1e4)}catch(e){b((0,n.jsx)(x.A,{defaultMessage:"Failed to save configuration",id:"k3HNr+oyR6",description:"Error message when extension configuration save fails"}),{error:e})}finally{F(!1)}};return(0,n.jsx)("div",{className:p,children:(0,n.jsxs)("div",{className:"break-inside-avoid",children:[Object.entries(t.user_config).map(e=>{let[t,a]=e;return(0,n.jsx)("div",{className:"mb-5",children:(0,n.jsxs)("label",{children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("span",{className:"text-md",children:a.title}),a.required&&(0,n.jsx)("span",{className:"text-text-400 ml-1",children:(0,n.jsx)(x.A,{defaultMessage:"(Required)",id:"5Q3Kor4lDg",description:"Label indicating a configuration field is required"})})]}),a.description&&"boolean"!==a.type&&(0,n.jsx)("p",{className:"text-xs text-text-400 mt-2 mb-3",children:a.description}),(0,n.jsx)("div",{className:"mb-2 mt-2",children:((e,t)=>{let a=y[e],s="w-full px-3 py-2 border border-border-300/25 rounded-md text-sm text-text-100 bg-bg-100";switch(t.type){case"string":return(0,n.jsx)("input",{type:t.sensitive?"password":"text",value:a||"",onChange:t=>C(e,t.target.value),placeholder:t.description,className:s});case"number":return(0,n.jsx)("input",{type:"number",value:a||"",onChange:t=>C(e,t.target.value?Number(t.target.value):""),min:t.min,max:t.max,placeholder:t.description,className:s});case"boolean":return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(l.j,{checked:a||!1,onChange:t=>C(e,t.target.checked)}),(0,n.jsx)("span",{className:"text-sm text-text-300",children:t.description})]});case"directory":case"file":if(!t.multiple)return(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("input",{type:"text",value:a||"",onChange:t=>C(e,t.target.value),placeholder:g.formatMessage({defaultMessage:"{type} path",id:"p8XbPZF2o4",description:"Placeholder for directory or file path input"},{type:"directory"===t.type?"Directory":"File"}),className:"".concat(s," flex-1 w-auto")}),(0,n.jsx)(i.$,{variant:"secondary",onClick:async()=>{var a,n;let s="directory"===t.type?await (null===d.un||void 0===d.un||null==(a=d.un.getDirectoryPath)?void 0:a.call(d.un,!1)):await (null===d.un||void 0===d.un||null==(n=d.un.getFilePath)?void 0:n.call(d.un,!1));s&&C(e,s[0])},className:"px-3 py-1.5",children:g.formatMessage({defaultMessage:"Browse",id:"0TPgIp3K/q",description:"Button to browse for file/directory"})})]});{let l=a||[];return(0,n.jsxs)("div",{children:[l.map((a,c)=>(0,n.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,n.jsx)("input",{type:"text",value:a,onChange:t=>{let a=[...l];a[c]=t.target.value,C(e,a)},placeholder:g.formatMessage({defaultMessage:"{type} path",id:"p8XbPZF2o4",description:"Placeholder for directory or file path input"},{type:"directory"===t.type?"Directory":"File"}),className:"".concat(s," flex-1 w-auto")}),(0,n.jsx)(i.$,{variant:"ghost",size:"icon",onClick:async()=>{var a,n;let s="directory"===t.type?await (null===d.un||void 0===d.un||null==(a=d.un.getDirectoryPath)?void 0:a.call(d.un,!1)):await (null===d.un||void 0===d.un||null==(n=d.un.getFilePath)?void 0:n.call(d.un,!1));if(s){let t=[...l];t[c]=s[0],C(e,t)}},children:(0,n.jsx)(r.sj,{})}),(0,n.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{C(e,l.filter((e,t)=>t!==c))},children:(0,n.jsx)(o.u,{})})]},c)),(0,n.jsxs)(i.$,{variant:"secondary",onClick:()=>{C(e,[...l,""])},className:"mt-2",children:[(0,n.jsx)(c.c,{className:"mr-1.5",size:16}),g.formatMessage({defaultMessage:"Add {type}",id:"1ddlPuxY71",description:"Button to add a new path"},{type:t.type})]})]})}default:return null}})(t,a)})]})},t)}),(0,n.jsxs)("div",{className:"flex gap-3 mt-6 justify-between items-center",children:[m&&(0,n.jsx)(i.$,{variant:"secondary",onClick:m,disabled:_,children:g.formatMessage({defaultMessage:"Cancel",id:"zVjtFM8JfM",description:"Button to cancel configuration edit"})}),M&&(0,n.jsx)("span",{className:"text-sm text-accent-secondary-100",children:g.formatMessage({defaultMessage:"Changes saved",id:"jdKVJo/vQ6",description:"Message shown after configuration is saved"})}),!M&&(0,n.jsx)("div",{}),(0,n.jsx)(i.$,{variant:"primary",onClick:k,disabled:!j||_,children:g.formatMessage({defaultMessage:"Save",id:"NuymVHsb1A",description:"Button to save configuration"})})]})]})})}},0x1f0737828:(e,t,a)=>{a.d(t,{l:()=>u});var n=a(0x22102fd88),s=a(0x10f221f41),l=a(0xa0c99a98),i=a(0x1a1f6dda6),d=a(0xfc89b4a4),r=a(0x1ab0d1ca1),o=a(0x1cf5ab98a);let c=(0,l.F)("flex\n  justify-between\n  w-fit\n  rounded-xl\n  p-3\n  gap-3\n  items-start\n  text-sm\n  border-0.5\n  border-border-200\n",{variants:{variant:{main:"bg-bg-200",danger:"text-danger-000 border-danger-100 bg-danger-900"}}});function u(e){let{message:t,onClose:a,...l}=e,u=(0,r.A)(),f=()=>"icon"in l&&l.icon?(0,n.jsx)("div",{className:"h-8 ml-1 flex items-center",children:d.createElement(l.icon,{size:20})}):null,x=()=>a?(0,n.jsx)(o.$,{size:"icon_sm",variant:"ghost",onClick:a,colorized:!0,"aria-label":u.formatMessage({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),children:(0,n.jsx)(s.X,{size:16})}):null,v=()=>"customAction"in l&&l.customAction?l.customAction:l.button?(0,n.jsx)(o.$,{...l.button,variant:"secondary",colorized:!0,size:"sm"}):null;if("pictogram"in l&&l.pictogram){let e=l.pictogram,a=v();return(0,n.jsxs)("div",{className:"flex items-center w-fit rounded-xl p-3 text-sm border-0.5 border-border-200 bg-bg-200",children:[(0,n.jsx)(e,{size:"small",highlightFill:"pictogram-200"}),(0,n.jsx)("div",{className:"mx-3",children:t}),a&&(0,n.jsx)("div",{className:"mr-2",children:a}),x()]})}let m="variant"in l?l.variant:"main",p="actionLayout"in l?l.actionLayout:void 0,g="className"in l?l.className:void 0;return"multiline"===p?(0,n.jsxs)("div",{"data-color-context":m,className:(0,i.A)(c({variant:m}),g),children:[(0,n.jsxs)("div",{className:"flex items-start",children:[f(),(0,n.jsxs)("div",{className:"mt-[0.35rem] ml-3",children:[(0,n.jsx)("div",{children:t}),(0,n.jsx)("div",{className:"mt-3",children:v()})]})]}),x()]}):(0,n.jsxs)("div",{"data-color-context":m,className:(0,i.A)(c({variant:m}),g),children:[(0,n.jsxs)("div",{className:"flex items-start",children:[f(),(0,n.jsx)("div",{className:"my-[0.35rem] ml-3",children:t})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"mr-1",children:v()}),x()]})]})}},0x25062734b:(e,t,a)=>{a.d(t,{$V:()=>M,vx:()=>_,yr:()=>C,iy:()=>I,kX:()=>F,sb:()=>w,v_:()=>S,Ax:()=>D,M8:()=>A,ko:()=>N,AY:()=>k,es:()=>E}),a(0x21e26ba67);var n=a(0x286b4261),s=a.n(n),l=a(0x17aa9d8d7),i=a(0xf32c56dd),d=a(0x12c9046cd),r=a(0x14de19ae8),o=a(0xc1dd9efc),c=a(0xac309a83),u=a(0x1bd175d8c),f=a(0xfc89b4a4),x=a(0x14c0dfde7),v=a(0x1d302b010),m=a(0x1417f52d9),p=a(0x9cb4c2a2),g=a(0x1c12b3087),b=a(0x78b33fbd),y=a(0xe824fb1c),h=a(0xbdad302d),j=a(0x31c535e9);let w=()=>(0,c.fS)("bagel_enabled"),_=()=>{let{account:e,activeOrganization:t}=(0,r.YL)(),a=(0,r.mV)(),n=(0,o.pG)(e,t,"claude-ai"),s=(0,o.yI)(e,t,o.Nt.IntegrationsManage);return!a||n||s},F=()=>{let e=(0,r.zm)(),t=_();return e&&!t},M="mcp_directory_chin",N=function(){var e,t;let{shouldTrack:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,f.useRef)(!1),s=w(),{dismiss:l}=(0,m.W)(),{account:i}=(0,r.YL)(),d=F(),o=new Date,c="".concat(o.getDate(),"-").concat(o.getMonth(),"-").concat(o.getFullYear()),u="".concat(M,"_").concat(c),x=(null!=(t=null==i||null==(e=i.settings.dismissed_claudeai_banners)?void 0:e.map(e=>e.banner_id))?t:[]).filter(e=>e.includes(M)),v=(0,f.useMemo)(()=>!(!s||d||x.includes(M))&&(!(x.length>3)||!x.includes(u)),[d,s,x,u]);return(0,f.useEffect)(()=>{!n.current&&v&&!x.includes(u)&&a&&(l(u),n.current=!0)},[u,x,a,l,v]),v};function C(e){var t;let a=(0,c.fS)("disable_destructive_mcp_tools_by_default"),{getMcpToolApprovalConfigSetting:n}=function(e){let{value:t}=(0,b.useDynamicConfig)("yukon_gold"===e?"tanuki_mcp_tool_approval_config":"mcp_tool_approval_config"),a=(0,f.useCallback)((e,a)=>{var n,s;if(!t||!e)return;let l=[e.url,e.uuid,e.name].map(e=>{var n,s;if(e)return(null==(n=t[e])?void 0:n[null!=a?a:"*"])||(null==(s=t[e])?void 0:s["*"])||void 0}).find(e=>void 0!==e);return void 0!==l?l:a&&(null==(n=t["*"])?void 0:n[a])!==void 0?t["*"][a]:(null==(s=t["*"])?void 0:s["*"])!==void 0?t["*"]["*"]:void 0},[t]);return{toolApprovalConfig:t,getMcpToolApprovalConfigSetting:a}}(e),{account:s}=(0,r.YL)(),l=null==s||null==(t=s.settings)?void 0:t.enabled_mcp_tools;return(0,f.useCallback)((e,t)=>{var s,i;let d=n(e,null==t?void 0:t.name),r=(null==t?void 0:t.alwaysApprovedKey)?null==l?void 0:l[null==t?void 0:t.alwaysApprovedKey]:void 0;return a&&(null==t||null==(s=t.annotations)?void 0:s.destructiveHint)===!0?{approvalRequired:!0,showAlwaysAllowed:!1}:"always"===d?{approvalRequired:!0,showAlwaysAllowed:!1,managedByOrg:!0}:r?{approvalRequired:!1}:"server"===d?{approvalRequired:!1,managedByServer:!0}:"never"===d&&!1!==r||"readOnly"===d&&(null==t||null==(i=t.annotations)?void 0:i.readOnlyHint)===!0&&!1!==r?{approvalRequired:!1}:{approvalRequired:!0,showAlwaysAllowed:!0,managedByOrg:!1,managedByServer:!1}},[a,n,l])}let k=()=>{let e=(0,y.Uz)({type:"local"});return!!(0,u.V)()&&e.length>0},A=()=>{var e,t,a;let n=(0,p.oM)(),s=(null==(e=n.pendingConversationSettings)?void 0:e.compass_mode)==="advanced"||(null==(a=n.conversation)||null==(t=a.conversationSettings)?void 0:t.compass_mode)==="advanced",l=(0,y.Uz)({type:"remote"}).length>0;return s&&l},E=e=>{let t=(0,g.jw)(),{account:a}=(0,r.YL)(),{updateSettings:n}=(0,j.IS)(),{track:d}=(0,i.st)(),{mutate:o}=(0,l.yJ)(),{mutateAsync:c}=(0,h.Z1)();return{toggleMcpToolEnabled:(l,i,r)=>{if(!a)return;let o=Array.isArray(l)?l.reduce((e,t)=>({...e,[t]:i}),{}):{[l]:i};d({event_key:"claudeai.mcp.tool.toggled",conversation_uuid:(null==t?void 0:t.id)||null,setting:l,value:i,url:r,source:null==e?void 0:e.source}),n({mcpToolsUpdate:o}).then(()=>{if(null==t?void 0:t.sessionId)return c({sessionId:t.sessionId})}).catch(s())},toggleMcpToolAlwaysApproved:(e,t)=>{a&&o({enabled_mcp_tools:{...a.settings.enabled_mcp_tools,[e]:t}})}}},S=e=>{let{activeOrganization:t}=(0,r.YL)(),a=null==t?void 0:t.uuid,{data:n}=(0,v.XT)(a,e||"",{enabled:!!e&&!!a});return!!n},D=()=>{let e=(0,x.p9)(),{activeOrganization:t}=(0,r.YL)(),a=null==t?void 0:t.uuid;return(0,d.L2)("/api/organizations/".concat(a,"/mcp/resources"),"POST",{enabled:e&&!!a})};function I(e){let t=C(e);return(e,a)=>t(y.eZ.getState().remoteServers[e],{name:a,alwaysApprovedKey:"",displayName:"",enabledKey:"",inputSchema:{type:"object"}})}}}]);