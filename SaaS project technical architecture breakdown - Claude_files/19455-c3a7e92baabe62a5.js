try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="20d4c43a-f219-4d9c-9e67-7d16495964a0",e._sentryDebugIdIdentifier="sentry-dbid-20d4c43a-f219-4d9c-9e67-7d16495964a0")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19455],{0x481204e3:(e,t,a)=>{a.d(t,{Z:()=>f});var s=a(0x22102fd88),i=a(0x628a9a0b),n=a(0x1dd44336e),r=a(0x4d348f95),l=a(0xfc89b4a4),o=a(0x139b5e710),d=a(0x11c7a82c2),c=a(0x1ab0d1ca1),u=a(0x38e6572);function f(e){let{isOpen:t,onClose:a,conversation:f,conversationUuids:h,onConfirm:g}=e,m=null==f?void 0:f.uuid,[x,p]=(0,l.useState)(!1),{addError:j,addSuccess:b}=(0,o.Y)(),v=(0,c.A)(),y=!!(f&&!h),M=!!(h&&h.length>0),w=(0,l.useMemo)(()=>h||(m?[m]:[]),[h,m]),{data:_,isLoading:C}=(0,n.rC)({includeDeletedArtifacts:!1}),{mutate:S}=(0,i.t7)(),{mutateAsync:N}=(0,i.Vt)(),A=(0,r.usePathname)(),L=(()=>{let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),a=(0,l.useMemo)(()=>{let e=new URLSearchParams;(null==t?void 0:t.has("model"))&&e.append("model",t.get("model")),(null==t?void 0:t.has("max_tokens"))&&e.append("max_tokens",t.get("max_tokens")),(null==t?void 0:t.has("speak"))&&e.append("speak",t.get("speak")),(null==t?void 0:t.has("t"))&&e.append("t",t.get("t")),(null==t?void 0:t.has("q"))&&e.append("q",t.get("q"));let a=e.toString();return a?"?".concat(a):""},[t]);return{push:(0,l.useCallback)(t=>e.push("".concat(t).concat(a)),[e,a]),replace:(0,l.useCallback)(t=>e.replace("".concat(t).concat(a)),[e,a])}})(),F=(0,l.useCallback)(async()=>{if(g){p(!0);try{await g()}finally{p(!1)}return}if(y&&f){let e=A==="/chat/".concat(m);S(f),e&&L.push("/new"),a(),b(v.formatMessage({defaultMessage:"Chat deleted",id:"jw4hjzNcgG"}))}else if(M){let e=Math.ceil(w.length/20);p(!0);let t=0,s=0;try{for(let a=0;a<e;a++){let i=20*a,n=w.slice(i,i+20),r=await N({conversation_uuids:n});t+=r.deleted.length,s+=r.failed.length,a<e-1&&await new Promise(e=>setTimeout(e,500))}t>0&&b(v.formatMessage({defaultMessage:"{count, plural, one {# chat deleted} other {# chats deleted}}",id:"3h6Nx0KOpC"},{count:t})),s>0&&j(v.formatMessage({defaultMessage:"{count, plural, one {Failed to delete # chat. You can try again.} other {Failed to delete # chats. You can try again.}}",id:"NscK7QPlXL"},{count:s}),{messageForLogging:"{count, plural, one {Failed to delete # chat. You can try again.} other {Failed to delete # chats. You can try again.}}"})}catch(e){j("Failed to delete some chats. You can try again.",{error:e})}finally{p(!1),a()}w.some(e=>A==="/chat/".concat(e))&&L.push("/new")}},[g,y,f,m,M,w,S,a,A,L,N,j,b,v]),k=M?v.formatMessage({defaultMessage:"Delete {count, plural, one {# chat} other {# chats}}",id:"JhH5WXc6VS"},{count:w.length}):v.formatMessage({defaultMessage:"Delete chat",id:"ngIzbjIFxF"});return(0,s.jsx)(d.R,{isOpen:t,onClose:a,onConfirm:F,title:k,message:M?v.formatMessage({defaultMessage:"Are you sure you want to permanently delete {count, plural, one {this chat} other {these chats}}? This cannot be undone.",id:"oUQNLoQUff"},{count:w.length}):v.formatMessage({defaultMessage:"Are you sure you want to delete this chat?",id:"eoF+zSJr4t"}),confirmText:v.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),variant:"danger",isLoading:x,disabled:C,testId:"delete-modal-confirm",children:(()=>{if(!y)return null;let e=null==_?void 0:_.filter(e=>e.chat_conversation_uuid===m).map(e=>e.title);return e&&0!==e.length?(0,s.jsxs)("div",{children:[(0,s.jsx)(u.A,{defaultMessage:"When you delete this chat, youâ€™ll also delete the published artifacts in this chat.",id:"+r05Hpg92t"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("ul",{className:"list-disc pl-5",children:e.map(e=>(0,s.jsx)("li",{children:e},e))})})]}):null})()})}},0x6808359f:(e,t,a)=>{a.d(t,{p:()=>y});var s=a(0x22102fd88),i=a(0x628a9a0b),n=a(0xf32c56dd),r=a(0x10f221f41),l=a(0x12bb05cb6),o=a(0xac309a83),d=a(0xfc89b4a4),c=a(0x38e6572),u=a(0xbebfc702),f=a(0x945c7f20),h=a(0x23fde417d),g=a(0x246846ae8),m=a(0x225bae024),x=a(0x183548b63),p=a(0x23a446eb7),j=a(0x1ab0d1ca1);function b(e){let{isOpen:t,onClose:a,initialName:n,conversationUuid:r,projectUuid:l}=e,o=(0,j.A)(),{mutate:u,isPending:f}=(0,i.HI)(r,l),[h,b]=(0,d.useState)(n),v=(0,d.useRef)(null);return(0,p.y)({shouldFocus:t,target:v}),(0,s.jsx)(x.aF,{isOpen:t,onClose:a,title:o.formatMessage({defaultMessage:"Rename chat",id:"Oi9LAY6C5H"}),children:(0,s.jsxs)("form",{className:"grid gap-2",onSubmit:e=>{e.preventDefault(),u({name:h}),a()},children:[(0,s.jsx)(g.ks,{"data-testid":"name-chat",ref:v,className:"mt-3",value:h,onChange:e=>b(e.target.value)}),(0,s.jsxs)(x.vW,{children:[(0,s.jsx)(m.$,{variant:"secondary",type:"button",onClick:a,disabled:f,children:(0,s.jsx)(c.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(m.$,{"data-testid":"name-chat-submit",type:"submit",disabled:f,children:(0,s.jsx)(c.A,{defaultMessage:"Save",id:"jvo0vs3nF0"})})]})]})})}var v=a(0x481204e3);let y=e=>{let{conversation:t,initialName:a,open:g,onOpenChange:m,trigger:x,onSelectForBulk:p}=e,{track:j}=(0,n.st)(),[y,M]=(0,d.useState)(!1),[w,_]=(0,d.useState)(!1),[C,S]=(0,d.useState)(!1),N=(0,f.K)(),A=(0,o.fS)("move_conversation_to_projects"),L=N&&A,{mutate:F}=(0,i.wR)(t.uuid),{removeFromProject:k,isRemoving:T}=(0,u.nl)(),Y=async()=>{t.project_uuid&&!T&&await k([t.uuid])};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.ms,{align:"end",open:g,onOpenChange:m,trigger:x,unstyledTrigger:!0,children:(0,s.jsxs)("div",{children:[p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.tJ,{"data-testid":"select-for-bulk-trigger",onSelect:()=>{p(),null==m||m(!1)},icon:(0,s.jsx)(r.Jlk,{}),children:(0,s.jsx)(c.A,{defaultMessage:"Select",id:"kQAf2d9u+x"})}),(0,s.jsx)(l.DG,{})]}),(0,s.jsx)(l.tJ,{"data-testid":"star-chat-trigger",onSelect:()=>{(()=>{let e=!t.is_starred;F({is_starred:e}),j({event_key:e?"claudeai.conversation.starred":"claudeai.conversation.unstarred",conversation_uuid:t.uuid,conversation_name:a})})(),null==m||m(!1)},icon:t.is_starred?(0,s.jsx)(r.BQ2,{}):(0,s.jsx)(r.FEq,{}),children:t.is_starred?(0,s.jsx)(c.A,{defaultMessage:"Unstar",id:"Y5zRLWgCMP"}):(0,s.jsx)(c.A,{defaultMessage:"Star",id:"VwapsmdMes"})}),(0,s.jsx)(l.tJ,{"data-testid":"rename-chat-trigger",onSelect:()=>{M(!0),null==m||m(!1)},icon:(0,s.jsx)(r.ffu,{}),children:(0,s.jsx)(c.A,{defaultMessage:"Rename",id:"iXNbPfQDIZ"})}),L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.tJ,{"data-testid":"move-to-project-trigger",onSelect:()=>{null==m||m(!1),setTimeout(()=>S(!0),100)},icon:(0,s.jsx)(r.JtL,{}),children:t.project_uuid?(0,s.jsx)(c.A,{defaultMessage:"Change project",id:"5RCPLcgnza"}):(0,s.jsx)(c.A,{defaultMessage:"Add to project",id:"+mqxxzVczn"})}),t.project_uuid&&(0,s.jsx)(l.tJ,{"data-testid":"remove-from-project-trigger",onSelect:()=>{null==m||m(!1),Y()},icon:(0,s.jsx)(r.B6z,{}),children:(0,s.jsx)(c.A,{defaultMessage:"Remove from project",id:"FgGKwPHI5T"})})]}),(0,s.jsx)(l.DG,{}),(0,s.jsx)(l.tJ,{danger:!0,"data-testid":"delete-chat-trigger",onSelect:()=>{null==m||m(!1),setTimeout(()=>_(!0),100)},icon:(0,s.jsx)(r.lMJ,{}),children:(0,s.jsx)(c.A,{defaultMessage:"Delete",id:"K3r6DQW7h+"})})]})}),(0,s.jsx)(v.Z,{isOpen:w,onClose:()=>_(!1),conversation:t}),(0,s.jsx)(b,{conversationUuid:t.uuid,isOpen:y,initialName:a,onClose:()=>M(!1),projectUuid:t.project_uuid}),L&&(0,s.jsx)(h.h,{conversationUuid:t.uuid,currentProjectUuid:t.project_uuid,isOpen:C,onClose:()=>S(!1)})]})}},0x1214e4a54:(e,t,a)=>{a.d(t,{j:()=>u});var s=a(0x22102fd88),i=a(0x139b5e710),n=a(0x800328fa),r=a(0x4d348f95),l=a(0xfc89b4a4),o=a(0x1ab0d1ca1),d=a(0x38e6572),c=a(0xbebfc702);let u=()=>{let{moveToProject:e}=(0,c.Zd)(),{addSuccess:t,addError:a}=(0,i.Y)(),u=(0,o.A)(),f=(0,r.useRouter)();return{moveToProject:(0,l.useCallback)(async function(i,r,l){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{showSuccess:c=!0,showError:h=!0,enableNavigation:g=!0,onSuccess:m}=o;try{let o=await e(i,r),x=i.length>1;if(o.totalMoved>0&&c)if(x){let e=g?(0,s.jsx)(d.A,{defaultMessage:"{count, plural, one {# chat} other {# chats}} moved to {projectName}",id:"NV3PpRB1tb",values:{count:o.totalMoved,projectName:(0,s.jsx)(n.Y,{onClick:()=>f.push("/project/".concat(r)),className:"-my-2 !px-1 !min-w-0",children:l||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})})}}):u.formatMessage({defaultMessage:"{count, plural, one {# chat} other {# chats}} moved to {projectName}",id:"NV3PpRB1tb"},{count:o.totalMoved,projectName:l||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})});t(e)}else{let e=g?(0,s.jsx)(d.A,{defaultMessage:"Chat moved to {projectName}",id:"t6VGfzHSDj",values:{projectName:(0,s.jsx)(n.Y,{onClick:()=>f.push("/project/".concat(r)),className:"-my-2 !px-1 !min-w-0",children:l||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})})}}):u.formatMessage({defaultMessage:"Chat moved to {projectName}",id:"t6VGfzHSDj"},{projectName:l||u.formatMessage({defaultMessage:"project",id:"RbFAl7UGmp"})});t(e)}return o.totalFailed>0&&h&&(x?a(u.formatMessage({defaultMessage:"{count, plural, one {Failed to move # chat. You can try again.} other {Failed to move # chats. You can try again.}}",id:"43D5uv51my"},{count:o.totalFailed}),{messageForLogging:"{count, plural, one {Failed to move # chat. You can try again.} other {Failed to move # chats. You can try again.}}"}):a(u.formatMessage({defaultMessage:"This chat does not exist or was deleted",id:"57wYxTOkNA"}),{messageForLogging:"This chat does not exist or was deleted"})),null==m||m(o),o}catch(e){throw h&&a(u.formatMessage({defaultMessage:"Failed to move chats. You can try again.",id:"icpocvB+Op"}),{error:e,messageForLogging:"Failed to move chats. You can try again."}),e}},[e,t,a,u,f])}}},0x1dd44336e:(e,t,a)=>{a.d(t,{AH:()=>j,EC:()=>m,M7:()=>p,SN:()=>f,b5:()=>x,cH:()=>g,eH:()=>v,gY:()=>b,lT:()=>u,rC:()=>d,yE:()=>h,yx:()=>c});var s=a(0x12c9046cd),i=a(0x14de19ae8),n=a(0x49fac030),r=a(0x17e725145),l=a(0xfc89b4a4);let o="artifact_view_cache",d=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,r=new URLSearchParams;e&&"includeDeletedArtifacts"in e&&r.append("include_deleted_artifacts",String(e.includeDeletedArtifacts));let o=(0,s.Sk)("/api/organizations/".concat(a,"/published_artifacts?").concat(r.toString()),{staleTime:0,queryKey:[n.kg,{orgUuid:a}],enabled:!!a,meta:{noToast:null==e?void 0:e.noToast}}),d=(0,l.useMemo)(()=>{var e;return null==(e=o.data)?void 0:e.reduce((e,t)=>(e[t.message_uuid]||(e[t.message_uuid]=[]),e[t.message_uuid].push(t),e),{})},[o.data]);return{...o,publishedArtifactsByMessageUuid:d}},c=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,a=(0,r.useQueryClient)();return(0,s.L2)("/api/organizations/".concat(t,"/publish_artifact"),"POST",{onSuccess:()=>{a.invalidateQueries({queryKey:[n.kg,{orgUuid:t}]})}})},u=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,l=(0,r.useQueryClient)();return(0,s.L2)("/api/organizations/".concat(a,"/published_artifacts/").concat(e),"DELETE",{onSuccess:()=>{l.invalidateQueries({queryKey:[n.kg,{orgUuid:a}]})},enabled:!!e})},f=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,s.Sk)("/api/organizations/".concat(t,"/artifact_feedback_eligibility"),{queryKey:[n.Pr],enabled:!!t,meta:{noToast:!0}})},h=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,l=(0,r.useQueryClient)();return(0,s.L2)("/api/organizations/".concat(a,"/artifact-versions/").concat(e,"/visibility"),"POST",{onSuccess:()=>{l.invalidateQueries({queryKey:[n.F$,{artifactVersionUuid:e,orgUuid:a}]})}})},g=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,l=(0,r.useQueryClient)();return(0,s.L2)("/api/organizations/".concat(a,"/artifacts/").concat(e,"/byindex"),"POST",{onSuccess:e=>{l.invalidateQueries({queryKey:[n.F$,{artifactVersionUuid:e.artifactVersionUUID,orgUuid:a}]})}})},m=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid;return(0,s.Sk)("/api/organizations/".concat(a,"/artifact-versions/").concat(e,"/visibility"),{queryKey:[n.F$,{artifactVersionUuid:e,orgUuid:a}],enabled:!!e,meta:{noToast:!0}})},x=(e,t)=>{let a=(0,s.L2)("/api/published_artifacts/".concat(e,"/record_view"),"POST",{onSuccess:a=>{"view successfully recorded"===a.status&&function(e,t){if(!t)return;let a="".concat(t,"_").concat(e);try{let e=localStorage.getItem(o)||"{}",t=JSON.parse(e),s=t[a];if(s&&Date.now()-s<36e5)return;(t=function(e){let t=Date.now(),a={};for(let[s,i]of Object.entries(e))t-i<=36e5&&(a[s]=i);return a}(t))[a]=Date.now(),localStorage.setItem(o,JSON.stringify(t))}catch(e){}}(e,t)},meta:{noToast:!0}});return{...a,mutate:s=>{!function(e,t){if(!t)return!1;let a="".concat(t,"_").concat(e);try{let e=localStorage.getItem(o);if(!e)return!1;let t=JSON.parse(e),s=t[a];if(!s)return!1;if(Date.now()-s>36e5)return delete t[a],localStorage.setItem(o,JSON.stringify(t)),!1;return!0}catch(e){return!1}}(e,t)&&a.mutate(s||{})}}},p=e=>{let t=new URLSearchParams;e.forEach(e=>{t.append("artifact_uuids",e)});let a="/api/published_artifacts/view_counts?".concat(t.toString());return(0,s.Sk)(a,{queryKey:[n.g_,e],meta:{noToast:!0},enabled:e.length>0})},j=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,a=(0,s.L2)(e=>"/api/organizations/".concat(t,"/published_artifacts/").concat(e.published_artifact_uuid,"/snapshot"),"POST",{meta:{noToast:!0}}),n=async e=>{if(!(e.domSnapshot.length>5242880))return a.mutateAsync({dom_snapshot:e.domSnapshot,published_artifact_uuid:e.publishedArtifactUuid,viewport_width:e.viewportWidth,viewport_height:e.viewportHeight})};return{...a,mutateAsync:n}},b=e=>(0,s.Sk)("/api/published_artifacts/".concat(e,"/embed_whitelist"),{queryKey:[n.hn,e],meta:{noToast:!0},enabled:!!e}),v=e=>{let{activeOrganization:t}=(0,i.YL)(),a=null==t?void 0:t.uuid,l=(0,r.useQueryClient)();return(0,s.L2)("/api/organizations/".concat(a,"/published_artifacts/").concat(e,"/embed_whitelist"),"PUT",{enabled:!!e&&!!a,meta:{noToast:!0},onSuccess:()=>{l.invalidateQueries({queryKey:[n.hn,e]})}})}},0x23fde417d:(e,t,a)=>{a.d(t,{h:()=>v});var s=a(0x22102fd88),i=a(0x17185943),n=a(0x10f221f41),r=a(0x21d170f9),l=a(0x183548b63),o=a(0xbb84ce70),d=a(0x23e5d6187),c=a(0x293c4f9d),u=a(0x160045b25),f=a(0x1dc411c0f),h=a(0xfc89b4a4),g=a(0x1ab0d1ca1),m=a(0x38e6572),x=a(0xbebfc702),p=a(0x1214e4a54),j=a(0x1a1f6dda6);let b=e=>{let{size:t=20,className:a,vectorSizeOverride:i}=e,n=i||({12:16,14:16,16:20,20:20,24:24,28:28,32:32})[t]||t;return(0,s.jsx)("div",{className:(0,j.A)("relative inline-flex items-center justify-center",a),style:{width:t,height:t},children:(0,s.jsxs)("svg",{width:n,height:n,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"overflow-visible",children:[(0,s.jsx)("path",{d:"M15.8198 7C16.6885 7.00025 17.3624 7.73158 17.3178 8.57617L17.2993 8.74707L16.1332 15.7471C16.0126 16.4699 15.3865 16.9996 14.6538 17H5.34711C4.6142 16.9998 3.98833 16.47 3.86762 15.7471L2.7016 8.74707C2.54922 7.83277 3.25418 7 4.18109 7H15.8198ZM4.18109 8C3.87216 8 3.63722 8.27731 3.68793 8.58203L4.85394 15.582C4.89413 15.8229 5.10291 15.9998 5.34711 16H14.6538C14.8978 15.9996 15.1068 15.8228 15.1469 15.582L16.3129 8.58203L16.3188 8.46973C16.3036 8.21259 16.0899 8.00023 15.8198 8H4.18109Z"}),(0,s.jsx)("g",{transform:"translate(10, 10)",children:(0,s.jsxs)("path",{d:"M16.0004 5.5C16.0004 5.224 15.7764 5.00024 15.5004 5H4.50043C4.22428 5 4.00043 5.22386 4.00043 5.5C4.00043 5.77614 4.22428 6 4.50043 6H15.5004C15.7764 5.99976 16.0004 5.776 16.0004 5.5Z",transform:"translate(-10, -10)",children:[(0,s.jsx)("animateTransform",{attributeName:"transform",type:"translate",values:"0,-5; 0,-1; 0,1.5; 0,1.5",dur:"2s",begin:"0s",repeatCount:"indefinite",additive:"sum"}),(0,s.jsx)("animateTransform",{attributeName:"transform",type:"rotate",values:"6 10 5.5; 0 10 5.5; 0 10 5.5; 0 10 5.5",dur:"2s",begin:"0s",repeatCount:"indefinite",additive:"sum"}),(0,s.jsx)("animate",{attributeName:"opacity",values:"0;0.7;0",dur:"2s",begin:"0s",repeatCount:"indefinite"})]})}),(0,s.jsx)("g",{transform:"translate(10, 10)",children:(0,s.jsxs)("path",{d:"M14.5004 3.5C14.5004 3.224 14.2764 3.00024 14.0004 3H6.00043C5.72428 3 5.50043 3.22386 5.50043 3.5C5.50043 3.77614 5.72428 4 6.00043 4H14.0004C14.2764 3.99976 14.5004 3.776 14.5004 3.5Z",transform:"translate(-10, -10)",children:[(0,s.jsx)("animateTransform",{attributeName:"transform",type:"translate",values:"2,-5; 0,-1; 0,3.5; 0,3.5",dur:"2s",begin:"0.5s",repeatCount:"indefinite",additive:"sum"}),(0,s.jsx)("animateTransform",{attributeName:"transform",type:"rotate",values:"10 10 3.5; 0 10 3.5; 0 10 3.5; 0 10 3.5",dur:"2s",begin:"0.5s",repeatCount:"indefinite",additive:"sum"}),(0,s.jsx)("animate",{attributeName:"opacity",values:"0;0.7;0",dur:"2s",begin:"0.5s",repeatCount:"indefinite"})]})})]})})},v=e=>{let{conversationUuid:t,conversationUuids:a,currentProjectUuid:j,isOpen:v,onClose:y}=e,M=(0,g.A)(),{data:w}=(0,x.fo)(j&&v?j:void 0),_=(0,h.useMemo)(()=>a||(t?[t]:[]),[a,t]),C=a&&a.length>1,[S,N]=(0,h.useState)(""),[A]=(0,d.o)(S,300),L=(0,h.useCallback)(()=>{N(""),y()},[y]),{data:F,isLoading:k,isError:T}=(0,x.u7)({enabled:v,limit:x.sC,searchQuery:A||void 0,creatorFilter:A?void 0:"is_creator",orderBy:A?void 0:"latest_chat"}),Y=(0,h.useMemo)(()=>(null==F?void 0:F.data)||[],[F]),z=k&&0===Y.length,{moveToProject:P}=(0,p.j)(),[D,O]=(0,h.useState)(!1),{mutateAsync:H,isPending:I}=(0,x.bL)(),U=(0,h.useCallback)(async(e,t)=>{O(!0);try{await P(_,e,t,{enableNavigation:!0}),L()}catch(e){L()}finally{O(!1)}},[_,P,L]),R=(0,h.useCallback)(async e=>{var t;let a=(null==(t=Y.find(t=>t.uuid===e))?void 0:t.name)||"project";await U(e,a)},[Y,U]),Q=(0,h.useCallback)(async e=>{try{let t=await H({name:e,description:"",is_private:!0});await U(t.uuid,e)}catch(e){}},[H,U]),K=I||D,J=(0,h.useCallback)(()=>{if(z||k)return(0,s.jsxs)("div",{className:"px-3 py-2 space-y-2 opacity-60",children:[(0,s.jsx)(o.j,{height:26,variant:"light",width:"80%",rounded:"md"}),(0,s.jsx)(o.j,{height:26,variant:"light",width:"60%",rounded:"md"}),(0,s.jsx)(o.j,{height:26,variant:"light",width:"70%",rounded:"md"}),(0,s.jsx)(o.j,{height:26,variant:"light",width:"75%",rounded:"md"})]});if(T)return(0,s.jsx)("div",{className:"p-4 text-center text-text-400 text-sm",children:(0,s.jsx)(m.A,{defaultMessage:"Failed to load projects",id:"ld45uLSco8"})});let e=Y.filter(e=>e.uuid!==j);return 0!==e.length||S?(0,s.jsxs)(s.Fragment,{children:[e.map(e=>(0,s.jsxs)(c.uB.Item,{value:e.uuid,onSelect:()=>R(e.uuid),disabled:K,className:"w-full text-left px-3 h-10 rounded-lg font-base flex gap-2 items-center cursor-pointer data-[selected]:bg-bg-200 group",children:[(0,s.jsx)(r.o,{}),(0,s.jsx)("span",{className:"truncate flex-1 min-w-0 items-center gap-2",children:e.name}),!e.is_private&&(0,s.jsxs)(i.E,{color:"default",size:"lg",className:"gap-1",children:[(0,s.jsx)(n.yb4,{vectorSizeOverride:14}),(0,s.jsx)(m.A,{defaultMessage:"Shared",id:"kWI6zXRaHY"})]})]},e.uuid)),S&&(0,s.jsxs)(c.uB.Item,{value:"create_".concat(S),onSelect:()=>Q(S),disabled:K,className:"w-full text-left px-3 h-10 rounded-lg font-base flex gap-2 items-center cursor-pointer data-[selected]:bg-bg-200",children:[(0,s.jsx)(n.OMN,{}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[(0,s.jsx)(m.A,{defaultMessage:"Create",id:"VzzYJkHnLP"}),(0,s.jsxs)("div",{className:"border-border-300 border-0.5 inline-flex py-0.5 px-1.5 rounded-md ml-1 gap-1",children:[(0,s.jsx)(n.JtL,{}),S]})]})]},"create_".concat(S))]}):(0,s.jsx)("div",{className:"p-4 text-text-400 text-sm text-center",children:(0,s.jsx)(m.A,{defaultMessage:"No projects available",id:"UN4PP2vYc0"})})},[z,k,T,Y,S,K,j,R,Q]);return(0,s.jsx)(l.aF,{hasCloseButton:!0,title:C?(0,s.jsx)(m.A,{defaultMessage:"Move {count, plural, one {# chat} other {# chats}}",id:"h3OmfpzpuG",values:{count:_.length}}):(0,s.jsx)(m.A,{defaultMessage:"Move chat",id:"zNLTS6YXxC"}),subtitle:C?(0,s.jsx)(m.A,{defaultMessage:"Select a project to move these chats into.",id:"ELEW2C1+j8"}):w?(0,s.jsx)(m.A,{defaultMessage:"This chat is in <span>{projectName}</span>. Select a different project to move it to.",id:"qw9HutvczV",values:{projectName:w.name,span:e=>(0,s.jsx)("span",{className:"font-medium",children:e})}}):(0,s.jsx)(m.A,{defaultMessage:"Select a project to move this chat into.",id:"amiezKud8v"}),isOpen:v,onClose:L,modalSize:"lg",className:"gap-0",children:(0,s.jsxs)(c.uB,{className:"flex flex-col mt-3 h-72 bg-bg-000 border-0.5 border-border-300 overflow-hidden rounded-xl -mx-1 -mb-1 relative",shouldFilter:!1,children:[(0,s.jsxs)("div",{className:"flex items-center border-b-0.5 border-border-300 px-5 h-12 relative overflow-hidden",children:[(0,s.jsx)(n.vji,{className:"text-text-500 mr-1"}),(0,s.jsx)(c.uB.Input,{autoFocus:!0,placeholder:M.formatMessage({defaultMessage:"Search or create a project",id:"ehdflFyLeM"}),className:"flex-1 bg-transparent !outline-none text-text-000 font-base placeholder:font-base",value:S,onValueChange:N})]}),(0,s.jsx)(c.uB.List,{className:"overflow-auto flex-1 p-1",children:J()}),(0,s.jsx)(u.N,{children:K&&(0,s.jsx)(f.P.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(4px)"},className:"absolute inset-0 flex items-center justify-center bg-bg-000/80 rounded-xl",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)(b,{size:32,className:"text-text-500"}),(0,s.jsx)("p",{className:"text-text-400 text-sm",children:(0,s.jsx)(m.A,{defaultMessage:"Moving...",id:"ZrO1i3APWM"})})]})})})]})})}}}]);